!function(e,t){"object"===typeof exports&&"undefined"!==typeof module?t(exports,require("react"),require("prop-types")):"function"===typeof define&&define.amd?define(["exports","react","prop-types"],t):t((e=e||self).ReactFormutil={},e.React,e.PropTypes)}(this,function(e,t,n){"use strict";var r="default"in t?t.default:t;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e){return($="function"===typeof Symbol&&"symbol"===f(Symbol.iterator)?function(e){return f(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":f(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return!t||"object"!==$(t)&&"function"!==typeof t?d(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}n=n&&n.hasOwnProperty("default")?n.default:n;var g="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};function y(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function b(e,t){return e(t={exports:{}},t.exports),t.exports}var w="__global_unique_id__",C=function(){return g[w]=(g[w]||0)+1};function V(e){return function(){return e}}var F=function(){};F.thatReturns=V,F.thatReturnsFalse=V(!1),F.thatReturnsTrue=V(!0),F.thatReturnsNull=V(null),F.thatReturnsThis=function(){return this},F.thatReturnsArgument=function(e){return e};var P=F,S=b(function(e,t){t.__esModule=!0;a(r);var o=a(n),i=a(C);a(P);function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=1073741823;t.default=function(e,t){var n,a,f="__create-react-context-"+(0,i.default)()+"__",$=function(e){function n(){var t,r,o,i;u(this,n);for(var a=arguments.length,l=Array(a),c=0;c<a;c++)l[c]=arguments[c];return t=r=s(this,e.call.apply(e,[this].concat(l))),r.emitter=(o=r.props.value,i=[],{on:function(e){i.push(e)},off:function(e){i=i.filter(function(t){return t!==e})},get:function(){return o},set:function(e,t){o=e,i.forEach(function(e){return e(o,t)})}}),s(r,t)}return l(n,e),n.prototype.getChildContext=function(){var e;return(e={})[f]=this.emitter,e},n.prototype.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n=this.props.value,r=e.value,o=void 0;((i=n)===(a=r)?0!==i||1/i===1/a:i!==i&&a!==a)?o=0:(o="function"===typeof t?t(n,r):c,0!==(o|=0)&&this.emitter.set(e.value,o))}var i,a},n.prototype.render=function(){return this.props.children},n}(r.Component);$.childContextTypes=((n={})[f]=o.default.object.isRequired,n);var d=function(t){function n(){var e,r;u(this,n);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=r=s(this,t.call.apply(t,[this].concat(i))),r.state={value:r.getValue()},r.onUpdate=function(e,t){0!==((0|r.observedBits)&t)&&r.setState({value:r.getValue()})},s(r,e)}return l(n,t),n.prototype.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?c:t},n.prototype.componentDidMount=function(){this.context[f]&&this.context[f].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?c:e},n.prototype.componentWillUnmount=function(){this.context[f]&&this.context[f].off(this.onUpdate)},n.prototype.getValue=function(){return this.context[f]?this.context[f].get():e},n.prototype.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(r.Component);return d.contextTypes=((a={})[f]=o.default.object,a),{Provider:$,Consumer:d}},e.exports=t.default});y(S);var O=y(b(function(e,t){t.__esModule=!0;var n=i(r),o=i(S);function i(e){return e&&e.__esModule?e:{default:e}}t.default=n.default.createContext||o.default,e.exports=t.default})),E=O({}),k=function(){},j=Object.getPrototypeOf({}),x=/\s*(?:\]\s*\.|\]\s*\[|\.|\[|\])\s*/g,_=T(window)?global:window;function T(e){return"undefined"===typeof e}function D(e){return"function"===typeof e}function R(e){return T(e)||null===e||e+""===""}function A(e){return!!e&&D(e.then)}function N(e){return!!function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e)&&(null===Object.getPrototypeOf(e)||!!D(e.constructor)&&e.constructor.prototype===j)}function M(e){if(e&&"object"===typeof e){if(Array.isArray(e)){for(var t=[],n=0,r=e.length;n<r;n++)t[n]=M(e[n]);return t}if(N(e)){var o={};for(var i in e)o[i]=M(e[i]);return o}}return e}var U=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return D(e)&&e.apply(void 0,n),n[0]};function I(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return D(n[0])?e.apply(void 0,n):function(t){return e(t,n[0])}}}var L=["minlength","maxlength","max","min","required","pattern","step"];var H,B,z=function(e){try{return new Function("origin","global","return typeof ".concat(e," === 'number' || (typeof ").concat(e," !== 'undefined' && !(origin in global)) ? ").concat(e," : origin"))(e,_)}catch(t){return e}},Y=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],o=t[1],i=t[2];k("string"===typeof o,"The second parameter(".concat(JSON.stringify(o),") of parsePath() must be a string."));var a=(o.match(x)||[]).map(function(e){return e.replace(/\s/g,"")}),u=o.split(x).map(function(e){return e.trim()}).filter(function(e){return""!==e}),s=r;try{if(t.length<3)for(var l=0,c=u.length;l<c;l++){var f=z(u[l]);if(l+1===c)return s[f];if(T(s[f]))break;s=s[f]}else for(var $=0,d=u.length;$<d;$++){var p=z(u[$]),h=u[$+1],m=a[$];if(T(h)){s[p]=i;break}switch(m){case"].":case".":s=T(s[p])?s[p]={}:s[p];break;case"][":case"[":var v=z(h);s=T(s[p])?s[p]="number"===typeof v&&v>=0?[]:{}:s[p];break;default:s[p]=i}}}catch(e){k(!1,"The name '%s' of Field seems is not a legal expression.",o)}if(t.length>2)return r},q=function(e,t){for(var n=0,r=e.length;n<r;n++)if(!0===t(e[n]))return e[n]},Q=function(e,t){return Object.keys(e).reduce(function(n,r){return n[r]=t(e[r],r,e),n},{})},G=function(e,t){return Object.keys(e).forEach(function(n){return t(e[n],n,e)})},W=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.reduce(function(){return t.apply(void 0,arguments),arguments.length<=0?void 0:arguments[0]},n)},K=function(e,t){T(Y(e,t))||(Y(e,t,void 0),function e(t,n,r){G(t,function(n,r){void 0===n?delete t[r]:n&&"object"===typeof n&&e(n,r,t)}),r&&Object.keys(t).every(function(e){return void 0===t[e]})&&(r[n]=void 0,e(r))}(e))},J="FORM_VALIDATE_RESULT";"function"===typeof requestAnimationFrame?(H=requestAnimationFrame,B=cancelAnimationFrame):(H=setTimeout,B=clearTimeout);var X=function(e){function n(e){var t;return s(this,n),(t=p(this,h(n).call(this,e))).$$registers={},t.$$deepRegisters={},t.$$regDuplications={},t.$$checkDuplication=function(){var e,n=d(t).$$regDuplications;G(n,function(t,r){var o=u(t,2),i=o[0],a=o[1];k(i.$$reserved,"The Field with a name '".concat(r,"' has been registered!")),a.$$reset(i.$getState()),e=delete n[r]}),e&&t.$render()},t.$$register=function(e,n,r){if(t.$$unregister(r,n),e){var o=t.$$getRegister(e);o?(B(t.$$duplicateTimer),t.$$regDuplications[e]=[o,n],t.$$duplicateTimer=H(t.$$checkDuplication)):(t.$$fieldChangedQueue.push({name:e,$newValue:n.$getState().$value}),K(t.$$defaultValues,e)),t.$$registers[n.$name=e]=n,t.createDeepRegisters(),t.$render()}},t.$$unregister=function(e,n,r){if(e){if(e in t.$$regDuplications){var o=u(t.$$regDuplications[e],2),i=o[0],a=o[1];t.$$fieldChangedQueue.push({name:e,$newValue:a.$getState().$value,$prevValue:i.$getState().$value}),delete t.$$regDuplications[e]}else t.$$registers[e]===n&&(r?n.$$reserved=!0:(delete t.$$registers[e],t.$$fieldChangedQueue.push({name:e,$prevValue:n.$getState().$value}),K(t.$$defaultValues,e)));t.createDeepRegisters(),t.$render()}},t.$$defaultInitialize=function(){var e=t.props,n=e.$defaultValues,r=e.$defaultStates;t.$$defaultValues=t.$$deepParseObject(M(D(n)?n(t.props)||{}:n)),t.$$defaultStates=t.$$deepParseObject(M(D(r)?r(t.props)||{}:r))},t.$$getDefault=function(){return{$$defaultStates:t.$$defaultStates,$$defaultValues:t.$$defaultValues}},t.$$fieldChangedQueue=[],t.$$triggerFormChange=function(){if(t.$$fieldChangedQueue.length){var e=a(t.$$fieldChangedQueue);t.$$fieldChangedQueue.length=0;var n={},r={},o=t.$$registers,i=!1;e.forEach(function(e){if(e.name in o||delete e.$newValue,e.$newValue!==e.$prevValue){if("$newValue"in e&&"$prevValue"in e){var a=t.$$getRegister(e.name);a&&a.$$triggerChange(e)}"$newValue"in e&&Y(n,e.name,e.$newValue),"$prevValue"in e&&Y(r,e.name,e.$prevValue),i=!0}}),i&&(D(t.props.$validator)&&t.$$formValidate(),D(t.props.$onFormChange)&&t.props.$onFormChange(t.$formutil,n,r))}},t.createDeepRegisters=function(){return t.$$deepRegisters=t.$$deepParseObject(t.$$registers)},t.$$getRegister=function(e){if(e){var n=t.$$registers[e]||Y(t.$$deepRegisters,e);if(n)return n}},t.$$formValidate=function(e){return t.$$formValidatePromise=new Promise(function(n){var r,o,i,a,u=(0,t.props.$validator)(t.$formutil.$params,t.formtutil),s=function(t){return n(U(e,U(i,t)))};A(u)?(t.$$formPending||(t.$$formPending=!0,t.$render()),o=function(e){return r=e(s)},a=u.then(function(){},function(e){return e}).then(function(e){return r||(t.$shouldCancelPrevAsyncValidate=null,t.$$formPending=!1,t.$$setFormErrors(e,s))})):(t.$$formPending&&(t.$$formPending=!1),a=t.$$setFormErrors(u,s)),t.$shouldCancelPrevAsyncValidate&&t.$shouldCancelPrevAsyncValidate(function(e){return i=e,a}),t.$shouldCancelPrevAsyncValidate=o})},t.$$setFormErrors=function(e,n){return e&&(e instanceof Error||"object"!==typeof e)?(k(!1,"The result of $validator in <Form /> should always return None(null,undefined) or an object contains error message of Field."),t.$render(n)):t.$$setStates(e||{},function(e,t){var n=t.$getState().$error,r=void 0===n?{}:n;return e?{$error:i({},r,o({},J,e))}:r[J]?(delete r[J],{$error:r}):void 0},n,!0)},t.$getField=function(e){var n=t.$$getRegister(e);if(k(!e||n,"$getField('".concat(e,"') fail to find the matched Field. Maybe it has been unmounted.")),k(e,"You should pass a name of the mounted Field to $getField()."),n)return n.$new()},t.$$onChange=function(e,n,r){return t.$setStates(o({},e,n),r)},t.$$setStates=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,i=t.$$deepParseObject(e),a=!1;return G(t.$$registers,function(r,u){var s=u in e?e[u]:Y(i,u);if(!T(s)||o){var l=n(s,r);if(l){var c=t.$formutil.$weakParams[u],f=r.$$merge(l).$value;if(r.$$detectChange(l),"$value"in l||"$viewValue"in l){var $=q(t.$$fieldChangedQueue,function(e){return e.name===u});$?("$prevValue"in $||($.$prevValue=$.$newValue),$.$newValue=f):t.$$fieldChangedQueue.push({name:u,$newValue:f,$prevValue:c})}a=!0}}}),a?t.$render(r):Promise.resolve(U(r,t.$formutil))},t.$render=function(e){return new Promise(function(n){return t.forceUpdate(function(){return n(U(e,t.$formutil))})})},t.$validates=function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];if(D(r[r.length-1])&&(e=r.pop()),r.length){!function e(n){n.forEach(function(n){if(Array.isArray(n))e(n);else{var r=t.$getField(n);r&&r.$validate()}})}(r)}else G(t.$$registers,function(e){return e.$validate()}),D(t.props.$validator)&&t.$$formValidate();return t.$onValidates(e)},t.$onValidates=function(e){var n=Object.keys(t.$$registers).map(function(e){return t.$$registers[e].$onValidate()});return n.push(t.$$formValidatePromise),Promise.all(n).then(function(){return U(e,t.$formutil)})},t.$validate=function(e,n){var r=t.$getField(e);return r?r.$validate(n):U(n)},t.$reset=function(e,n){return t.$$defaultInitialize(),D(e)&&(n=e,e={}),t.$$setStates(e,function(e,t){return t.$$reset(e)},n,!0)},t.$setStates=function(e,n){return t.$$setStates(e,function(e){return e},n)},t.$setValues=function(e,n){return t.$$deepParseObject(M(e),t.$$defaultValues),t.$$setStates(e,function(e){return{$value:e}},n)},t.$setFocuses=function(e,n){return t.$$setStates(e,function(e){return{$focused:e}},n)},t.$setDirts=function(e,n){return t.$$setStates(e,function(e){return{$dirty:e}},n)},t.$setTouches=function(e,n){return t.$$setStates(e,function(e){return{$touched:e}},n)},t.$setPendings=function(e,n){return t.$$setStates(e,function(e){return{$pending:e}},n)},t.$setErrors=function(e,n){return t.$$setStates(e,function(e){return{$error:e}},n)},t.$batchState=function(e,n){return t.$setStates(Q(t.$$registers,function(){return e}),n)},t.$batchDirty=function(e,n){return t.$batchState({$dirty:e},n)},t.$batchTouched=function(e,n){return t.$batchState({$touched:e},n)},t.$batchFocused=function(e,n){return t.$batchState({$focused:e},n)},t.$batchPending=function(e,n){return t.$batchState({$pending:e},n)},t.$batchError=function(e,n){return t.$batchState({$error:e},n)},t.$$defaultInitialize(),t}return v(n,t.Component),c(n,[{key:"getFormContext",value:function(){return{$$registers:this.$$registers,$$register:this.$$register,$$unregister:this.$$unregister,$$onChange:this.$$onChange,$$getDefault:this.$$getDefault,$formutil:this.$formutil}}},{key:"$$deepParseObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return G(e,function(e,n){return Y(t,n,e)}),t}},{key:"componentDidUpdate",value:function(){var e=this;B(this.$$triggerChangeTimer),this.$$triggerChangeTimer=H(function(){e.$$triggerFormChange()})}},{key:"_render",value:function(){var e=this.$formutil,n=this.props,r=n.children,o=n.render,i=n.component;return i?t.createElement(i,{$formutil:e}):D(o)?o(e):D(r)?r(e):t.Children.map(r,function(n){return n&&D(n.type)?t.cloneElement(n,{$formutil:e}):n})}},{key:"render",value:function(){var e=this,t=this.props.$processer,n=Object.keys(this.$$registers).map(function(t){return{path:t,$state:e.$$registers[t].$getState()}}),o=W(n,function(e,n){var r=n.path,o=n.$state;t&&t(o,r),"$value"in o&&(o.$dirty||!T(o.$value))&&(e[r]=o.$value)}),a=W(n,function(e,t){var n=t.path;t.$state;return n in o&&Y(e,n,o[n])}),u=n.some(function(e){return e.$state.$invalid}),s=n.some(function(e){return e.$state.$dirty}),l=n.some(function(e){return e.$state.$touched}),c=n.some(function(e){return e.$state.$focused}),f=this.$$formPending||n.some(function(e){return e.$state.$pending}),$=this.$formutil={$$registers:i({},this.$$registers),$$deepRegisters:this.$$deepRegisters,$states:W(n,function(e,t){var n=t.path,r=t.$state;return Y(e,n,r)}),$params:i({},this.$$defaultValues,a),$errors:W(n,function(e,t){var n=t.path,r=t.$state;r.$invalid&&Y(e,n,r.$error)}),$dirts:W(n,function(e,t){var n=t.path,r=t.$state;return Y(e,n,r.$dirty)}),$touches:W(n,function(e,t){var n=t.path,r=t.$state;return Y(e,n,r.$touched)}),$focuses:W(n,function(e,t){var n=t.path,r=t.$state;return Y(e,n,r.$focused)}),$pendings:W(n,function(e,t){var n=t.path,r=t.$state;return Y(e,n,r.$pending)}),$weakStates:W(n,function(e,t){var n=t.path,r=t.$state;return e[n]=r}),$weakParams:o,$weakErrors:W(n,function(e,t){var n=t.path,r=t.$state;r.$invalid&&(e[n]=r.$error)}),$weakDirts:W(n,function(e,t){var n=t.path,r=t.$state;return e[n]=r.$dirty}),$weakTouches:W(n,function(e,t){var n=t.path,r=t.$state;return e[n]=r.$touched}),$weakFocuses:W(n,function(e,t){var n=t.path,r=t.$state;return e[n]=r.$focused}),$weakPendings:W(n,function(e,t){var n=t.path,r=t.$state;return e[n]=r.$pending}),$getFirstError:function(e){if(e){var t=$.$getField(e);return t&&t.$getFirstError()}for(var n in $.$weakErrors){var r=$.$weakErrors[n];for(var o in r)return r[o]instanceof Error?r[o].message:r[o]}},$render:this.$render,$getField:this.$getField,$onValidates:this.$onValidates,$new:function(){return e.$formutil},$setStates:this.$setStates,$setValues:this.$setValues,$setErrors:this.$setErrors,$setTouches:this.$setTouches,$setDirts:this.$setDirts,$setFocuses:this.$setFocuses,$batchState:this.$batchState,$batchTouched:this.$batchTouched,$batchDirty:this.$batchDirty,$batchFocused:this.$batchFocused,$reset:this.$reset,$validates:this.$validates,$validate:this.$validate,$valid:!u,$invalid:u,$dirty:s,$pristine:!s,$touched:l,$untouched:!l,$focused:c,$pending:f};return r.createElement(E.Provider,{value:this.getFormContext()},this._render())}}]),n}();function Z(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}X.displayName="React.Formutil.Form",X.defaultProps={$defaultValues:{},$defaultStates:{}};var te=b(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,$=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.memo"):60115,h=n?Symbol.for("react.lazy"):60116;function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case f:case i:case u:case a:case d:return e;default:switch(e=e&&e.$$typeof){case l:case $:case s:return e;default:return t}}case h:case p:case o:return t}}}function v(e){return m(e)===f}t.typeOf=m,t.AsyncMode=c,t.ConcurrentMode=f,t.ContextConsumer=l,t.ContextProvider=s,t.Element=r,t.ForwardRef=$,t.Fragment=i,t.Lazy=h,t.Memo=p,t.Portal=o,t.Profiler=u,t.StrictMode=a,t.Suspense=d,t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===f||e===u||e===a||e===d||"object"===typeof e&&null!==e&&(e.$$typeof===h||e.$$typeof===p||e.$$typeof===s||e.$$typeof===l||e.$$typeof===$)},t.isAsyncMode=function(e){return v(e)||m(e)===c},t.isConcurrentMode=v,t.isContextConsumer=function(e){return m(e)===l},t.isContextProvider=function(e){return m(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return m(e)===$},t.isFragment=function(e){return m(e)===i},t.isLazy=function(e){return m(e)===h},t.isMemo=function(e){return m(e)===p},t.isPortal=function(e){return m(e)===o},t.isProfiler=function(e){return m(e)===u},t.isStrictMode=function(e){return m(e)===a},t.isSuspense=function(e){return m(e)===d}});y(te);te.typeOf,te.AsyncMode,te.ConcurrentMode,te.ContextConsumer,te.ContextProvider,te.Element,te.ForwardRef,te.Fragment,te.Lazy,te.Memo,te.Portal,te.Profiler,te.StrictMode,te.Suspense,te.isValidElementType,te.isAsyncMode,te.isConcurrentMode,te.isContextConsumer,te.isContextProvider,te.isElement,te.isForwardRef,te.isFragment,te.isLazy,te.isMemo,te.isPortal,te.isProfiler,te.isStrictMode,te.isSuspense;var ne=b(function(e){e.exports=te}),re={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},oe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ie={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ae={};function ue(e){return ne.isMemo(e)?ie:ae[e.$$typeof]||re}ae[ne.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var se=Object.defineProperty,le=Object.getOwnPropertyNames,ce=Object.getOwnPropertySymbols,fe=Object.getOwnPropertyDescriptor,$e=Object.getPrototypeOf,de=Object.prototype;var pe=function e(t,n,r){if("string"!==typeof n){if(de){var o=$e(n);o&&o!==de&&e(t,o,r)}var i=le(n);ce&&(i=i.concat(ce(n)));for(var a=ue(t),u=ue(n),s=0;s<i.length;++s){var l=i[s];if(!oe[l]&&(!r||!r[l])&&(!u||!u[l])&&(!a||!a[l])){var c=fe(n,l);try{se(t,l,c)}catch(e){}}}return t}return t};var he=I(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=function(o){function a(){return s(this,a),p(this,h(a).apply(this,arguments))}return v(a,t.Component),c(a,[{key:"render",value:function(){var t=ee({},this.props),o=this.props,a=(o.component,Z(o,["component"]));return["$defaultStates","$defaultValues","$onFormChange","$validator","$processer"].forEach(function(e){e in t&&("$defaultStates"!==e&&"$defaultValues"!==e||(a[e]=i({},n[e],t[e])),delete t[e])}),r.createElement(X,Object.assign({},n,a,{render:function(n){return r.createElement(e,Object.assign({},t,{$formutil:n}))}}))}}]),a}();return o.displayName="React.Formutil.withForm."+(e.displayName||e.name||"Anonymous"),pe(o,e)}),me=0,ve={$valid:!0,$invalid:!1,$dirty:!1,$pristine:!0,$touched:!1,$untouched:!0,$focused:!1,$pending:!1,$error:{}};function ge(e){return!0!==e}function ye(e,t,n){k(!T(e),"You should return a string or Error when the validation('".concat(n&&n+": ").concat(t,"') failed, otherwise return true."))}n.string,n.any,n.oneOfType([n.object,n.func]),n.func,n.object,n.object,n.bool,n.bool,n.func,n.func,n.func,n.func;function be(){return me++}function we(e,t){var n;function r(t){var n,r=e.props,o=e.$formContext;if(o.$$getDefault){var a=r.name,u=o.$$getDefault(),s=u.$$defaultStates,l=u.$$defaultValues;if(a&&l){var f=Y(l,a);n=Y(s,a)||{},T(f)||(n.$value=f)}}var $=r.$defaultValue,d=r.$defaultState;return c(i({},ve,D(d)?d(r):d,{$value:D($)?$(r):"$defaultValue"in r?$:""},n,t))}function o(){return i({},e.$state)}function a(t){return n=new Promise(function(n){var r,o,a,c,f=e.props,$=e.$formContext,d=i({},f.$validators,f.$asyncValidators),p=e.$state,h=p.$value,m=p.$pending,v=ee({},p.$error),g=$.$formutil,y={},b=!1;delete v[J];var w=Object.keys(d).reduce(function(t,n){if(delete v[n],!b&&null!=f[n]){var o=d[n](h,f[n],i({},f,{$formutil:g,$fieldutil:e.$fieldutil,$validError:y}));A(o)?t.push(o.catch(function(e){r||s(n,e||n)})):ge(o)&&(y[n]=o||n,ye(o,n,f.name),f.$validateLazy&&(b=!0))}return t},[]),C=function(e){return n(U(t,U(a,e)))};w.length?(m||l(!0),o=function(e){return r=e(C)},w.push(u(i({},v,y))),c=Promise.all(w).then(function(){return r||(e.$shouldCancelPrevAsyncValidate=null,l(!1,C))})):(m&&l(!1),c=u(i({},v,y),C)),e.$shouldCancelPrevAsyncValidate&&e.$shouldCancelPrevAsyncValidate(function(e){return a=e,c}),e.$shouldCancelPrevAsyncValidate=o})}function u(t,n){return e.$setState({$error:t},n)}function s(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,o=ee({},e.$state.$error);return ge(n)?(o[t]=n||t,ye(n,t,e.props.name)):delete o[t],u(o,r)}function l(t,n){return e.$setState({$pending:t},n)}function c(t){var n=ee({},t);"$error"in n&&(n.$error||(n.$error={}),n.$valid=0===Object.keys(n.$error).length);var r=e.props,a=r.$parser,u=r.$formatter;if("$viewValue"in n&&!("$value"in n)){n.$value=a?a(n.$viewValue,function(e){return n.$viewValue=e}):n.$viewValue}else if("$value"in n&&!("$viewValue"in n)){n.$viewValue=u?u(n.$value,function(e){return n.$value=e}):n.$value}return"$valid"in n?n.$invalid=!n.$valid:"$invalid"in n&&(n.$dirty=!n.$invalid),"$dirty"in n?n.$pristine=!n.$dirty:"$pristine"in n&&(n.$dirty=!n.$pristine),"$touched"in n?n.$untouched=!n.$touched:"$untouched"in n&&(n.$touched=!n.$untouched),e.$state=i({},e.$state,n),o()}return{$$FIELD_UUID:e.$$FIELD_UUID,$$reset:r,$$merge:c,$$detectChange:function(e){("$value"in e||"$viewValue"in e)&&a()},$$triggerChange:function(t){var n=t.$newValue,r=t.$prevValue,o=e.props.$onFieldChange;D(o)&&o(n,r,e.$formContext.$formutil)},$onValidate:function(e){return n.then(e),n},$new:function(){return e.$fieldutil},$picker:o,$getState:o,$getComponent:function(){return t},$reset:function(t,n){return e.$setState(r(t),n)},$getFirstError:function(){var t=e.$state.$error,n=void 0===t?{}:t;for(var r in n)return n[r]instanceof Error?n[r].message:n[r]},$validate:a,$setState:e.$setState,$render:function(t,n){return e.$setState({$viewValue:t,$dirty:!0},n)},$setValue:function(t,n){return e.$setState({$value:t},n)},$setTouched:function(t,n){return e.$setState({$touched:t},n)},$setDirty:function(t,n){return e.$setState({$dirty:t},n)},$setFocused:function(t,n){return e.$setState({$focused:t},n)},$setValidity:s,$setError:u,$setPending:l}}var Ce=function(e){function n(){var e,t;s(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=p(this,(e=h(n)).call.apply(e,[this].concat(o)))).$$FIELD_UUID=be(),t.$setState=function(e,n){return new Promise(function(r){var o=function(){return r(U(n,t.$fieldutil))};if(t.isMounting){var i=t.props.name;i in(t.$formContext.$$registers||{})?t.$formContext.$$onChange(i,e,o):(t.$registered.$$merge(e),t.$registered.$$detectChange(e),t.forceUpdate(o))}else t.$registered.$$merge(e),o()})},t}return v(n,t.Component),c(n,[{key:"componentDidMount",value:function(){this.isMounting=!0;var e=this.props.name,t=this.$formContext;k(!e||t.$formutil,"You should enusre that the <Field /> with the name '".concat(e,"' must be used underneath a <Form /> component or withForm() HOC, otherwise it's isolated.")),k(e,"You should assign a name to <Field />, otherwise it will be isolated!"),t.$$register&&t.$$register(e,this.$fieldHandler),this.$prevValue=this.$state.$value}},{key:"componentWillUnmount",value:function(){this.$formContext.$$unregister&&this.$formContext.$$unregister(this.props.name,this.$fieldHandler,this.props.$reserveOnUnmount),this.isMounting=!1}},{key:"componentDidUpdate",value:function(e){var t=this.props.name;t!==e.name&&this.$formContext.$$register&&this.$formContext.$$register(t,this.$fieldHandler,e.name),this.$state.$value!==this.$prevValue&&(t in(this.$formContext.$$registers||{})||this.$registered.$$triggerChange({$newValue:this.$state.$value,$prevValue:this.$prevValue}),this.$prevValue=this.$state.$value)}},{key:"_render",value:function(){return function(e,n){var r=n.children,o=n.render,i=n.component;return i?t.createElement(i,{$fieldutil:e}):D(o)?o(e):D(r)?r(e):t.Children.map(r,function(n){return n&&D(n.type)?t.cloneElement(n,{$fieldutil:e}):n})}(this.$fieldutil=i({$name:this.props.name},this.$registered.$getState(),this.$registered,{$$formutil:this.$formContext.$formutil}),this.props)}},{key:"render",value:function(){var e=this,t=!this.$formContext;return r.createElement(E.Consumer,null,function(n){return e.$formContext=n,e.$fieldHandler||(e.$fieldHandler=we(e,e)),e.$registered=(n.$$registers||{})[e.$fieldHandler.$name]||e.$fieldHandler,t&&(e.$fieldHandler.$$reset(),e.$fieldHandler.$validate()),e._render()})}}]),n}();Ce.displayName="React.Formutil.Field";var Ve=I(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=function(o){function a(){return s(this,a),p(this,h(a).apply(this,arguments))}return v(a,t.Component),c(a,[{key:"render",value:function(){var t=ee({},this.props),o=this.props,a=(o.component,Z(o,["component"]));return["$validators","$asyncValidators","$validateLazy","$reserveOnUnmount","$defaultValue","$defaultState","$onFieldChange","$parser","$formatter","name"].concat(Object.keys(i({},n.$validators,n.$asyncValidators,t.$validators,t.$asyncValidators))).forEach(function(e){e in t&&("$validators"!==e&&"$asyncValidators"!==e&&"$defaultState"!==e||(a[e]=i({},n[e],t[e])),delete t[e])}),r.createElement(Ce,Object.assign({},n,a,{render:function(n){return r.createElement(e,Object.assign({},t,{$fieldutil:n}))}}))}}]),a}();return o.displayName="React.Formutil.withField."+(e.displayName||e.name||"Anonymous"),pe(o,e)}),Fe=function(e){function n(){return s(this,n),p(this,h(n).apply(this,arguments))}return v(n,t.Component),c(n,[{key:"render",value:function(){var e=this,t=this.props,n=(t.$fieldutil,t.value),o=t.onChange,i=t.onFocus,a=t.onBlur,u=t.checked,s=t.unchecked,l=Z(t,["$fieldutil","value","onChange","onFocus","onBlur","checked","unchecked"]),c=this.props.type,f={value:"compositionValue"in this?this.compositionValue:n,onCompositionEnd:function(t){e.composition=!1,delete e.compositionValue,f.onChange(t)},onCompositionStart:function(){return e.composition=!0},onChange:function(t){var n=t.target.value;e.composition?(e.compositionValue=n,e.forceUpdate()):o(n,t)},onFocus:i,onBlur:a},$="input";switch(c){case"select":$=c,f.onChange=function(e){var t=e.target,n=t.multiple?[].slice.call(t.options).filter(function(e){return e.selected}).map(function(e){return e.value}):t.value;o(n,e)},delete l.type;break;case"textarea":$=c,delete l.type;break;case"checkbox":case"radio":f={checked:n===u,onChange:function(e){o(e.target.checked?u:s,e)},onFocus:i,onBlur:a}}return r.createElement($,Object.assign({},l,f))}}]),n}();Fe.displayName="React.Formutil.EasyField.Native",Fe.defaultProps={value:"",type:"text",checked:!0,unchecked:!1};var Pe=O({}),Se=Pe.Provider,Oe=Pe.Consumer,Ee=function(e){function n(){return s(this,n),p(this,h(n).apply(this,arguments))}return v(n,t.Component),c(n,[{key:"getGroupContext",value:function(){return this.props}},{key:"_render",value:function(){var e=this.props,n=e.className,o=e.groupNode,i=e.children,a={GroupOption:ke,Field:je},u=D(i)?i(a):t.Children.map(i,function(e){return t.cloneElement(e,a)});return null===o?u:r.createElement(o,{className:n},u)}},{key:"render",value:function(){return r.createElement(Se,{value:this.getGroupContext()},this._render())}}]),n}();Ee.displayName="React.Formutil.EasyField.Group",Ee.defaultProps={type:"checkbox",groupNode:"div"};var ke=function(e){function n(){return s(this,n),p(this,h(n).apply(this,arguments))}return v(n,t.Component),c(n,[{key:"componentDidMount",value:function(){k("$value"in this.props,"You should pass a $value to <GroupOption />.")}},{key:"render",value:function(){var e=this.props,t=e.$value,n=e.onChange,o=e.onFocus,i=e.onBlur,a=Z(e,["$value","onChange","onFocus","onBlur"]);return r.createElement(Oe,null,function(e){var u=e.type,s=e.name,l="radio"===u?{checked:e.value===t,onChange:function(r){e.onChange(t,r),n&&n(r)}}:"checkbox"===u?{checked:e.value.indexOf(t)>-1,onChange:function(r){e.onChange(r.target.checked?e.value.concat(t):e.value.filter(function(e){return e!==t}),r),n&&n(r)}}:{value:e.value,onChange:function(t){e.onChange(t),n&&n(t)}};return r.createElement("input",Object.assign({name:s},a,l,{type:u,onFocus:function(t){e.onFocus(t),o&&o(t)},onBlur:function(t){e.onBlur(t),i&&i(t)}}))})}}]),n}();ke.displayName="React.Formutil.EasyField.Group.Option";var je=function(e){function n(){return s(this,n),p(this,h(n).apply(this,arguments))}return v(n,t.Component),c(n,[{key:"componentDidMount",value:function(){k(!1,'The "Field" property in EasyField\'s children-props has been deprecated. Please use "GroupOption" instead.')}},{key:"render",value:function(){return r.createElement(ke,this.props)}}]),n}();je.displayName="React.Formutil.EasyField.Group.Option.Deprecated";var xe=Array.isArray,_e=Object.keys,Te=Object.prototype.hasOwnProperty,De="undefined"!==typeof Element;var Re=function(e,t){try{return function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var r,o,i,a=xe(t),u=xe(n);if(a&&u){if((o=t.length)!=n.length)return!1;for(r=o;0!==r--;)if(!e(t[r],n[r]))return!1;return!0}if(a!=u)return!1;var s=t instanceof Date,l=n instanceof Date;if(s!=l)return!1;if(s&&l)return t.getTime()==n.getTime();var c=t instanceof RegExp,f=n instanceof RegExp;if(c!=f)return!1;if(c&&f)return t.toString()==n.toString();var $=_e(t);if((o=$.length)!==_e(n).length)return!1;for(r=o;0!==r--;)if(!Te.call(n,$[r]))return!1;if(De&&t instanceof Element&&n instanceof Element)return t===n;for(r=o;0!==r--;)if(("_owner"!==(i=$[r])||!t.$$typeof)&&!e(t[i],n[i]))return!1;return!0}return t!==t&&n!==n}(e,t)}catch(e){if(e.message&&e.message.match(/stack|recursion/i)||-2146828260===e.number)return console.warn("Warning: react-fast-compare does not handle circular references.",e.name,e.message),!1;throw e}},Ae=function(e){function n(e){var t;return s(this,n),(t=p(this,h(n).call(this,e))).id=0,t.latestValue=t.props.value,t.FieldValidators={required:function(e){return null!==e}},t.$onFormChange=function(e){e.$onValidates(function(e){var n=e.$invalid,r=e.$params;n?t.props.value.length&&t.props.onChange(t.latestValue=[]):Re(t.props.value,r.list)||t.props.onChange(t.latestValue=r.list)})},t.swap=function(e,n,r){return t.$setState(function(t){var r=t.items,o=[r[e],r[n]];return r[n]=o[0],r[e]=o[1],r},r)},t.insert=function(){for(var e,n,r,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return i.forEach(function(t){D(t)?r=t:"number"===typeof t?e=t:"object"===typeof t&&(n=t)}),t.$setState(function(r){var o=r.items;return T(e)?o.push(t.getId(n)):o.splice(e,0,t.getId(n)),{items:o}},r)},t.remove=function(){for(var e,n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return o.forEach(function(t){D(t)?n=t:"number"===typeof t&&(e=t)}),t.$setState(function(n){var r=n.items;return T(e)?r.pop():r.splice(e,1),r.length||(r=[t.getId()]),{items:r}},n)},t.$setState=function(e,n){return new Promise(function(r){return t.setState(e,function(){return t.$formutil.$onValidates(function(e){return r(U(n,e))})})})},t.state={items:e.value.length?e.value.map(function(){return t.getId()}):[t.getId()],formKey:0},t}return v(n,t.Component),c(n,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.value!==this.latestValue&&(this.setState({items:this.props.value.length?this.props.value.map(function(){return t.getId()}):[this.getId()],formKey:this.state.formKey+1}),this.latestValue=this.props.value)}},{key:"getId",value:function(e){return{id:this.id++,values:e}}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,o=t.onFocus,a=t.onBlur,u=t.value;if(!D(n))return null;var s={$length:this.state.items.length,$insert:this.insert,$remove:this.remove,$swap:this.swap,$push:function(t,n){return e.insert(t,n)},$pop:function(t){return e.remove(t)},$shift:function(t){return e.remove(0,t)},$unshift:function(t,n){return e.insert(0,t,n)},onFocus:o,onBlur:a};return r.createElement(X,{key:this.state.formKey,$defaultValues:{list:u},$onFormChange:this.$onFormChange,children:function(t){return e.$formutil=t,e.state.items.map(function(o,a){var u=o.id,l=o.values;return r.createElement(Ce,{key:u,required:!0,$defaultValue:l||null,$validators:e.FieldValidators,name:"list[".concat(a,"]"),children:function(o){return r.createElement(X,{$defaultValues:o.$value||{},$onFormChange:function(e){return e.$onValidates(function(e){var t=e.$invalid,n=e.$params;t?null!==o.$viewValue&&o.$render(null):Re(o.$viewValue,n)||o.$render(n)})},children:function(r){return n(i({},s,r,{$index:a,$isLast:function(){return a===e.state.items.length-1},$isFirst:function(){return 0===a}}),t)}})}})})}})}}]),n}();Ae.displayName="React.Formutil.EasyField.List";var Ne="__TYPE__",Me=[["required",function(e,t,n){var r=n.__TYPE__,o=n.checked;return"checked"===r?e===(void 0===o||o):!R(e)}],["maxLength",function(e,t){return R(e)||e.length<=t}],["minLength",function(e,t){return R(e)||e.length>=t}],["max",function(e,t){return R(e)||1*e<=t}],["min",function(e,t){return R(e)||1*e>=t}],["pattern",function(e,t){return R(e)||t.test(e)}],["enum",function(e,t){return R(e)||t.indexOf(e)>-1}],["checker",function(e,t,n){return t(e,n)}]].reduce(function(e,t){var n=u(t,2),r=n[0],o=n[1];return e[r]=function(e,t,n){var i=n.validMessage,a=void 0===i?{}:i;return o.apply(void 0,arguments)||a[r]||"Error input: ".concat(r)},e},{}),Ue=(n.string,n.oneOfType([n.func,n.node]),n.func,n.func,n.any,n.object,n.string,n.string,n.string,n.string,n.string,{validMessage:{},valuePropName:"value",changePropName:"onChange",focusPropName:"onFocus",blurPropName:"onBlur",$parser:function(e){return"string"===typeof e?e.trim():e}});function Ie(e,t,n){var r,u=t.valuePropName,s=t.changePropName,l=t.focusPropName,c=t.blurPropName,f=t.passUtil,$=i({},n,(o(r={},u,e.$viewValue),o(r,s,function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var i=r[0],l=r[r.length-1];l=l&&l.target?[l]:r;var c=t[s];c&&c.apply(void 0,a(l));var f=function(e){return e&&e.target?e.target[u]:e}(i);e.$render(f)}),o(r,l,function(){var n=t[l];n&&n.apply(void 0,arguments),e.$setFocused(!0)}),o(r,c,function(){var n=t[c];n&&n.apply(void 0,arguments),e.$untouched&&e.$setTouched(!0),e.$setFocused(!1)}),r));return f&&($[!0===f?"$fieldutil":f]=e),$}function Le(e){var t=e.children,n=e.component,r=e.render,o=Z(e,["children","component","render"]),a=o.name,s=o.type,l=o.defaultValue,c=(o.valuePropName,o.changePropName,o.focusPropName,o.blurPropName,o.validMessage,o.__TYPE__,o.passUtil,o.$defaultValue,o.$defaultState,o.$onFieldChange,o.$validators,o.$asyncValidators,o.$validateLazy,o.$reserveOnUnmount,o.$parser,o.$formatter,Z(o,["name","type","defaultValue","valuePropName","changePropName","focusPropName","blurPropName","validMessage","__TYPE__","passUtil","$defaultValue","$defaultState","$onFieldChange","$validators","$asyncValidators","$validateLazy","$reserveOnUnmount","$parser","$formatter"])),f={children:t,component:n,render:r},$=!T(s)||T(t)&&T(n)&&T(r);if(Object.keys(i({},o.$validators=i({},Me,o.$validators),o.$asyncValidators)).forEach(function(e){e in c&&($&&function(e){return L.indexOf(e.toLowerCase())>-1}(e)||delete c[e])}),$){var d=u((s||"").split("."),2),p=d[0],h=void 0===p?"text":p,m=d[1];switch(f.component="group"===h?Ee:"list"===h?Ae:Fe,a&&(c.name=a),s&&(c.type=h),t&&(c.children=t),h){case"select":case"textarea":e.multiple&&(o[Ne]="array");break;case"group":"checkbox"===m&&(o[Ne]="array"),c.type=m;break;case"checkbox":case"radio":o[Ne]="checked";break;case"list":o[Ne]="array"}}if(!("$defaultValue"in o)&&"defaultValue"in e&&(o.$defaultValue=l),!("$defaultValue"in o)&&Ne in o){var v;switch(o[Ne]){case"checked":var g=o.unchecked;v=void 0!==g&&g;break;case"array":v=[];break;case"object":v={};break;case"number":v=0}o.$defaultValue=v}return{fieldProps:o,childProps:c,renderProps:f}}var He=function(e){function n(){return s(this,n),p(this,h(n).apply(this,arguments))}return v(n,t.Component),c(n,[{key:"render",value:function(){var e=Le(this.props),n=e.fieldProps,o=e.childProps,i=e.renderProps;return r.createElement(Ce,Object.assign({},n,{children:function(e){return function(e,n){var r=n.component,o=n.render,i=n.children;return r?t.createElement(r,e):D(o)?o(e):D(i)?i(e):t.Children.map(i,function(n){return t.cloneElement(n,e)})}(Ie(e,n,o),i)}}))}}]),n}();function Be(){return t.useContext(E)}function ze(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&("string"===typeof e?(n=e,r.name=n):n=(r=e).name);var o=Be(),s=t.useRef({}).current,l=t.useRef([]);s.$formContext=o,s.props=r,s.$setState=function(e,t){return new Promise(function(r){var i=function(){return r(U(t,s.$fieldutil))};s.isMounting?n in(o.$$registers||{})?o.$$onChange(n,e,i):(c(f.$$merge(e)),f.$$detectChange(e),l.current.push(i)):(f.$$merge(e),i())})};var c=u(t.useState(function(){s.$$FIELD_UUID=be(),s.$fieldHandler=we(s);var e=s.$fieldHandler.$$reset();return s.$fieldHandler.$validate(),e}),2)[1],f=(o.$$registers||{})[s.$fieldHandler.$name]||s.$fieldHandler;return t.useLayoutEffect(function(){var e=s.$state;if(s.isMounting&&!(n in(o.$$registers||{}))){var t=s.$prevValue;f.$$triggerChange({$newValue:e.$value,$prevValue:t})}s.$prevValue=e.$value},[s.$state.$value]),t.useLayoutEffect(function(){return s.isMounting=!0,k(!n||o.$formutil,"You should enusre that the useField() with the name '".concat(n,"' must be used underneath a <Form /> component or withForm() HOC, otherwise it's isolated.")),k(n,"You should pass a name argument to useField(), otherwise it will be isolated!"),function(){o.$$unregister&&o.$$unregister(n,s.$fieldHandler,r.$reserveOnUnmount),s.isMounting=!1}},[]),t.useLayoutEffect(function(){o.$$register&&(s.$registered=o.$$register(n,s.$fieldHandler,s.$prevName)),s.$prevName=n},[n]),t.useLayoutEffect(function(){if(l.current.length>0){var e=a(l.current);for(l.current.length=0;e.length;)e.pop()(s.$fieldutil)}}),s.$fieldutil=i({$name:n},f.$getState(),f,{$$formutil:o.$formutil})}He.displayName="React.Formutil.EasyField",He.defaultProps=Ue,e.EasyField=He,e.Field=Ce,e.Form=X,e.connect=function(e){var n=function(n){function o(){return s(this,o),p(this,h(o).apply(this,arguments))}return v(o,t.Component),c(o,[{key:"render",value:function(){var t=this;return r.createElement(E.Consumer,null,function(n){return r.createElement(e,Object.assign({},t.props,{$formutil:n.$formutil}))})}}]),o}();return n.displayName="React.Formutil.connect."+(e.displayName||e.name||"Anonymous"),pe(n,e)},e.useField=ze,e.useForm=function(){return Be().$formutil},e.useHandler=function(e){var t=Le(e=i({},Ue,e,{children:null})),n=t.fieldProps,r=t.childProps;return Ie(ze(n),n,r)},e.withField=Ve,e.withForm=he,Object.defineProperty(e,"__esModule",{value:!0})});
