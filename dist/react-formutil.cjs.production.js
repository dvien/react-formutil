"use strict";function _interopDefault(e){return e&&"object"===typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),React__default=_interopDefault(React),PropTypes=_interopDefault(require("prop-types")),createContext=_interopDefault(require("create-react-context")),warning=_interopDefault(require("warning")),hoistStatics=_interopDefault(require("hoist-non-react-statics")),isEqual=_interopDefault(require("react-fast-compare"));function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return r}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _typeof2(e){return(_typeof2="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"===typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!==typeof t?_assertThisInitialized(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}var FormContext=createContext({}),OBJECT_PROTO=Object.getPrototypeOf({}),PATH_REGEXP=/\s*(?:\]\s*\.|\]\s*\[|\.|\[|\])\s*/g,Root=isUndefined(window)?global:window;function isUndefined(e){return"undefined"===typeof e}function isFunction(e){return"function"===typeof e}function isEmpty(e){return isUndefined(e)||null===e||e+""===""}function isPromise(e){return!!e&&isFunction(e.then)}function isObject(e){return"[object Object]"===Object.prototype.toString.call(e)}function isPlainObj(e){return!!isObject(e)&&(null===Object.getPrototypeOf(e)||!!isFunction(e.constructor)&&e.constructor.prototype===OBJECT_PROTO)}function deepClone(e){if(e&&"object"===typeof e){if(Array.isArray(e)){for(var t=[],r=0,n=e.length;r<n;r++)t[r]=deepClone(e[r]);return t}if(isPlainObj(e)){var a={};for(var i in e)a[i]=deepClone(e[i]);return a}}return e}var runCallback=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return isFunction(e)&&e.apply(void 0,r),r[0]};function createHOC(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return isFunction(r[0])?e.apply(void 0,r):function(t){return e(t,r[0])}}}var VALID_PROPS=["minlength","maxlength","max","min","required","pattern","step"];function isValidProp(e){return VALID_PROPS.indexOf(e.toLowerCase())>-1}var requestFrame,cancelFrame,executeWord=function(e){try{return new Function("origin","global","return typeof ".concat(e," === 'number' || (typeof ").concat(e," !== 'undefined' && !(origin in global)) ? ").concat(e," : origin"))(e,Root)}catch(t){return e}},parsePath=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],a=t[1],i=t[2];warning("string"===typeof a,"The second parameter(".concat(JSON.stringify(a),") of parsePath() must be a string."));var o=(a.match(PATH_REGEXP)||[]).map(function(e){return e.replace(/\s/g,"")}),u=a.split(PATH_REGEXP).map(function(e){return e.trim()}).filter(function(e){return""!==e}),s=n;try{if(t.length<3)for(var l=0,c=u.length;l<c;l++){var $=executeWord(u[l]);if(l+1===c)return s[$];if(isUndefined(s[$]))break;s=s[$]}else for(var d=0,f=u.length;d<f;d++){var p=executeWord(u[d]),h=u[d+1],m=o[d];if(isUndefined(h)){s[p]=i;break}switch(m){case"].":case".":s=isUndefined(s[p])?s[p]={}:s[p];break;case"][":case"[":var v=executeWord(h);s=isUndefined(s[p])?s[p]="number"===typeof v&&v>=0?[]:{}:s[p];break;default:s[p]=i}}}catch(e){warning(!1,"The name '%s' of Field seems is not a legal expression.",a)}if(t.length>2)return n},arrayFind=function(e,t){for(var r=0,n=e.length;r<n;r++)if(!0===t(e[r]))return e[r]},objectMap=function(e,t){return Object.keys(e).reduce(function(r,n){return r[n]=t(e[n],n,e),r},{})},objectEach=function(e,t){return Object.keys(e).forEach(function(r){return t(e[r],r,e)})},toObject=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.reduce(function(){return t.apply(void 0,arguments),arguments.length<=0?void 0:arguments[0]},r)},TODO_DELETE=void 0,CLEAR=function e(t,r,n){objectEach(t,function(r,n){r===TODO_DELETE?delete t[n]:r&&"object"===typeof r&&e(r,n,t)}),n&&Object.keys(t).every(function(e){return t[e]===TODO_DELETE})&&(n[r]=TODO_DELETE,e(n))},objectClear=function(e,t){isUndefined(parsePath(e,t))||(parsePath(e,t,TODO_DELETE),CLEAR(e))},FORM_VALIDATE_RESULT="FORM_VALIDATE_RESULT";"function"===typeof requestAnimationFrame?(requestFrame=requestAnimationFrame,cancelFrame=cancelAnimationFrame):(requestFrame=setTimeout,cancelFrame=clearTimeout);var Form=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).$$formPending=void 0,r.$$formValidatePromise=void 0,r.$$registers={},r.$$deepRegisters={},r.$$regDuplications={},r.$$duplicateTimer=void 0,r.$$checkDuplication=function(){var e,t=_assertThisInitialized(r).$$regDuplications;objectEach(t,function(r,n){var a=_slicedToArray(r,2),i=a[0],o=a[1];warning(i.$$reserved,"The Field with a name '".concat(n,"' has been registered!")),o.$$reset(i.$getState()),e=delete t[n]}),e&&r.$render()},r.$$register=function(e,t,n){if(r.$$unregister(n,t),e){var a=r.$$getRegister(e);a?(cancelFrame(r.$$duplicateTimer),r.$$regDuplications[e]=[a,t],r.$$duplicateTimer=requestFrame(r.$$checkDuplication)):(r.$$fieldChangedQueue.push({name:e,$newValue:t.$getState().$value}),objectClear(r.$$defaultValues,e)),r.$$registers[t.$name=e]=t,r.createDeepRegisters(),r.$render()}},r.$$unregister=function(e,t,n){if(e){if(e in r.$$regDuplications){var a=_slicedToArray(r.$$regDuplications[e],2),i=a[0],o=a[1];r.$$fieldChangedQueue.push({name:e,$newValue:o.$getState().$value,$prevValue:i.$getState().$value}),delete r.$$regDuplications[e]}else r.$$registers[e]===t&&(n?t.$$reserved=!0:(delete r.$$registers[e],r.$$fieldChangedQueue.push({name:e,$prevValue:t.$getState().$value}),objectClear(r.$$defaultValues,e)));r.createDeepRegisters(),r.$render()}},r.$$defaultInitialize=function(){var e=r.props,t=e.$defaultValues,n=e.$defaultStates;r.$$defaultValues=r.$$deepParseObject(deepClone(isFunction(t)?t(r.props)||{}:t)),r.$$defaultStates=r.$$deepParseObject(deepClone(isFunction(n)?n(r.props)||{}:n))},r.$$getDefault=function(){return{$$defaultStates:r.$$defaultStates,$$defaultValues:r.$$defaultValues}},r.$$triggerChangeTimer=void 0,r.$$fieldChangedQueue=[],r.$$triggerFormChange=function(){if(r.$$fieldChangedQueue.length){var e=_toConsumableArray(r.$$fieldChangedQueue);r.$$fieldChangedQueue.length=0;var t={},n={},a=r.$$registers,i=!1;e.forEach(function(e){if(e.name in a||delete e.$newValue,e.$newValue!==e.$prevValue){if("$newValue"in e&&"$prevValue"in e){var o=r.$$getRegister(e.name);o&&o.$$triggerChange(e)}"$newValue"in e&&parsePath(t,e.name,e.$newValue),"$prevValue"in e&&parsePath(n,e.name,e.$prevValue),i=!0}}),i&&(isFunction(r.props.$validator)&&r.$$formValidate(),isFunction(r.props.$onFormChange)&&r.props.$onFormChange(r.$formutil,t,n))}},r.createDeepRegisters=function(){return r.$$deepRegisters=r.$$deepParseObject(r.$$registers)},r.$$getRegister=function(e){if(e){var t=r.$$registers[e]||parsePath(r.$$deepRegisters,e);if(t)return t}},r.$$formValidate=function(e){return r.$$formValidatePromise=new Promise(function(t){var n,a,i,o,u=(0,r.props.$validator)(r.$formutil.$params,r.formtutil),s=function(r){return t(runCallback(e,runCallback(i,r)))};isPromise(u)?(r.$$formPending||(r.$$formPending=!0,r.$render()),a=function(e){return n=e(s)},o=u.then(function(){},function(e){return e}).then(function(e){return n||(r.$shouldCancelPrevAsyncValidate=null,r.$$formPending=!1,r.$$setFormErrors(e,s))})):(r.$$formPending&&(r.$$formPending=!1),o=r.$$setFormErrors(u,s)),r.$shouldCancelPrevAsyncValidate&&r.$shouldCancelPrevAsyncValidate(function(e){return i=e,o}),r.$shouldCancelPrevAsyncValidate=a})},r.$$setFormErrors=function(e,t){return e&&(e instanceof Error||"object"!==typeof e)?(warning(!1,"The result of $validator in <Form /> should always return None(null,undefined) or an object contains error message of Field."),r.$render(t)):r.$$setStates(e||{},function(e,t){var r=t.$getState().$error,n=void 0===r?{}:r;return e?{$error:_objectSpread({},n,_defineProperty({},FORM_VALIDATE_RESULT,e))}:n[FORM_VALIDATE_RESULT]?(delete n[FORM_VALIDATE_RESULT],{$error:n}):void 0},t,!0)},r.$getField=function(e){var t=r.$$getRegister(e);if(warning(!e||t,"$getField('".concat(e,"') fail to find the matched Field. Maybe it has been unmounted.")),warning(e,"You should pass a name of the mounted Field to $getField()."),t)return t.$new()},r.$$onChange=function(e,t,n){return r.$setStates(_defineProperty({},e,t),n)},r.$$setStates=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,i=r.$$deepParseObject(e),o=!1;return objectEach(r.$$registers,function(n,u){var s=u in e?e[u]:parsePath(i,u);if(!isUndefined(s)||a){var l=t(s,n);if(l){var c=r.$formutil.$weakParams[u],$=n.$$merge(l).$value;if(n.$$detectChange(l),"$value"in l||"$viewValue"in l){var d=arrayFind(r.$$fieldChangedQueue,function(e){return e.name===u});d?("$prevValue"in d||(d.$prevValue=d.$newValue),d.$newValue=$):r.$$fieldChangedQueue.push({name:u,$newValue:$,$prevValue:c})}o=!0}}}),o?r.$render(n):Promise.resolve(runCallback(n,r.$formutil))},r.$render=function(e){return new Promise(function(t){return r.forceUpdate(function(){return t(runCallback(e,r.$formutil))})})},r.$validates=function(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(isFunction(n[n.length-1])&&(e=n.pop()),n.length){!function e(t){t.forEach(function(t){if(Array.isArray(t))e(t);else{var n=r.$getField(t);n&&n.$validate()}})}(n)}else objectEach(r.$$registers,function(e){return e.$validate()}),isFunction(r.props.$validator)&&r.$$formValidate();return r.$onValidates(e)},r.$onValidates=function(e){var t=Object.keys(r.$$registers).map(function(e){return r.$$registers[e].$onValidate()});return t.push(r.$$formValidatePromise),Promise.all(t).then(function(){return runCallback(e,r.$formutil)})},r.$validate=function(e,t){var n=r.$getField(e);return n?n.$validate(t):runCallback(t)},r.$reset=function(e,t){return r.$$defaultInitialize(),isFunction(e)&&(t=e,e={}),r.$$setStates(e,function(e,t){return t.$$reset(e)},t,!0)},r.$setStates=function(e,t){return r.$$setStates(e,function(e){return e},t)},r.$setValues=function(e,t){return r.$$deepParseObject(deepClone(e),r.$$defaultValues),r.$$setStates(e,function(e){return{$value:e}},t)},r.$setFocuses=function(e,t){return r.$$setStates(e,function(e){return{$focused:e}},t)},r.$setDirts=function(e,t){return r.$$setStates(e,function(e){return{$dirty:e}},t)},r.$setTouches=function(e,t){return r.$$setStates(e,function(e){return{$touched:e}},t)},r.$setPendings=function(e,t){return r.$$setStates(e,function(e){return{$pending:e}},t)},r.$setErrors=function(e,t){return r.$$setStates(e,function(e){return{$error:e}},t)},r.$batchState=function(e,t){return r.$setStates(objectMap(r.$$registers,function(){return e}),t)},r.$batchDirty=function(e,t){return r.$batchState({$dirty:e},t)},r.$batchTouched=function(e,t){return r.$batchState({$touched:e},t)},r.$batchFocused=function(e,t){return r.$batchState({$focused:e},t)},r.$batchPending=function(e,t){return r.$batchState({$pending:e},t)},r.$batchError=function(e,t){return r.$batchState({$error:e},t)},r.$$defaultInitialize(),r}return _inherits(t,React.Component),_createClass(t,[{key:"getFormContext",value:function(){return{$$registers:this.$$registers,$$register:this.$$register,$$unregister:this.$$unregister,$$onChange:this.$$onChange,$$getDefault:this.$$getDefault,$formutil:this.$formutil}}},{key:"$$deepParseObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return objectEach(e,function(e,r){return parsePath(t,r,e)}),t}},{key:"componentDidUpdate",value:function(){var e=this;cancelFrame(this.$$triggerChangeTimer),this.$$triggerChangeTimer=requestFrame(function(){e.$$triggerFormChange()})}},{key:"_render",value:function(){var e=this.$formutil,t=this.props,r=t.children,n=t.render,a=t.component;return a?React.createElement(a,{$formutil:e}):isFunction(n)?n(e):isFunction(r)?r(e):React.Children.map(r,function(t){return t&&isFunction(t.type)?React.cloneElement(t,{$formutil:e}):t})}},{key:"render",value:function(){var e=this,t=this.props.$processer,r=Object.keys(this.$$registers).map(function(t){return{path:t,$state:e.$$registers[t].$getState()}}),n=toObject(r,function(e,r){var n=r.path,a=r.$state;t&&t(a,n),"$value"in a&&(a.$dirty||!isUndefined(a.$value))&&(e[n]=a.$value)}),a=toObject(r,function(e,t){var r=t.path;t.$state;return r in n&&parsePath(e,r,n[r])}),i=r.some(function(e){return e.$state.$invalid}),o=r.some(function(e){return e.$state.$dirty}),u=r.some(function(e){return e.$state.$touched}),s=r.some(function(e){return e.$state.$focused}),l=this.$$formPending||r.some(function(e){return e.$state.$pending}),c=this.$formutil={$$registers:_objectSpread({},this.$$registers),$$deepRegisters:this.$$deepRegisters,$states:toObject(r,function(e,t){var r=t.path,n=t.$state;return parsePath(e,r,n)}),$params:_objectSpread({},this.$$defaultValues,a),$errors:toObject(r,function(e,t){var r=t.path,n=t.$state;n.$invalid&&parsePath(e,r,n.$error)}),$dirts:toObject(r,function(e,t){var r=t.path,n=t.$state;return parsePath(e,r,n.$dirty)}),$touches:toObject(r,function(e,t){var r=t.path,n=t.$state;return parsePath(e,r,n.$touched)}),$focuses:toObject(r,function(e,t){var r=t.path,n=t.$state;return parsePath(e,r,n.$focused)}),$pendings:toObject(r,function(e,t){var r=t.path,n=t.$state;return parsePath(e,r,n.$pending)}),$weakStates:toObject(r,function(e,t){var r=t.path,n=t.$state;return e[r]=n}),$weakParams:n,$weakErrors:toObject(r,function(e,t){var r=t.path,n=t.$state;n.$invalid&&(e[r]=n.$error)}),$weakDirts:toObject(r,function(e,t){var r=t.path,n=t.$state;return e[r]=n.$dirty}),$weakTouches:toObject(r,function(e,t){var r=t.path,n=t.$state;return e[r]=n.$touched}),$weakFocuses:toObject(r,function(e,t){var r=t.path,n=t.$state;return e[r]=n.$focused}),$weakPendings:toObject(r,function(e,t){var r=t.path,n=t.$state;return e[r]=n.$pending}),$getFirstError:function(e){if(e){var t=c.$getField(e);return t&&t.$getFirstError()}for(var r in c.$weakErrors){var n=c.$weakErrors[r];for(var a in n)return n[a]instanceof Error?n[a].message:n[a]}},$render:this.$render,$getField:this.$getField,$onValidates:this.$onValidates,$new:function(){return e.$formutil},$setStates:this.$setStates,$setValues:this.$setValues,$setErrors:this.$setErrors,$setTouches:this.$setTouches,$setDirts:this.$setDirts,$setFocuses:this.$setFocuses,$batchState:this.$batchState,$batchTouched:this.$batchTouched,$batchDirty:this.$batchDirty,$batchFocused:this.$batchFocused,$reset:this.$reset,$validates:this.$validates,$validate:this.$validate,$valid:!i,$invalid:i,$dirty:o,$pristine:!o,$touched:u,$untouched:!u,$focused:s,$pending:l};return React__default.createElement(FormContext.Provider,{value:this.getFormContext()},this._render())}}]),t}();function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}function _objectWithoutProperties(e,t){if(null==e)return{};var r,n,a=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function withForm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(r){function n(){return _classCallCheck(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))}return _inherits(n,React.Component),_createClass(n,[{key:"render",value:function(){var r=Object.assign({},this.props),n=this.props,a=(n.component,_objectWithoutProperties(n,["component"]));return["$defaultStates","$defaultValues","$onFormChange","$validator","$processer"].forEach(function(e){e in r&&("$defaultStates"!==e&&"$defaultValues"!==e||(a[e]=_objectSpread({},t[e],r[e])),delete r[e])}),React__default.createElement(Form,Object.assign({},t,a,{render:function(t){return React__default.createElement(e,Object.assign({},r,{$formutil:t}))}}))}}]),n}();return r.displayName="React.Formutil.withForm."+(e.displayName||e.name||"Anonymous"),hoistStatics(r,e)}Form.displayName="React.Formutil.Form",Form.defaultProps={$defaultValues:{},$defaultStates:{}};var withForm$1=createHOC(withForm),FIELD_UUID=0,$baseState={$valid:!0,$invalid:!1,$dirty:!1,$pristine:!0,$touched:!1,$untouched:!0,$focused:!1,$pending:!1,$error:{}};function isError(e){return!0!==e}function warningValidatorReturn(e,t,r){warning(!isUndefined(e),"You should return a string or Error when the validation('".concat(r&&r+": ").concat(t,"') failed, otherwise return true."))}var propTypes={name:PropTypes.string,$defaultValue:PropTypes.any,$defaultState:PropTypes.oneOfType([PropTypes.object,PropTypes.func]),$onFieldChange:PropTypes.func,$validators:PropTypes.object,$asyncValidators:PropTypes.object,$validateLazy:PropTypes.bool,$reserveOnUnmount:PropTypes.bool,$parser:PropTypes.func,$formatter:PropTypes.func,render:PropTypes.func,component:PropTypes.func,children:function(e){var t=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);e.render||e.component||null===e.children||(t=t.isRequired);for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return t.apply(void 0,[e].concat(n))}},displayName="React.Formutil.Field";function GET_FIELD_UUID(){return FIELD_UUID++}function renderField(e,t){var r=t.children,n=t.render,a=t.component;return a?React.createElement(a,{$fieldutil:e}):isFunction(n)?n(e):isFunction(r)?r(e):React.Children.map(r,function(t){return t&&isFunction(t.type)?React.cloneElement(t,{$fieldutil:e}):t})}function createHandler(e,t){var r;function n(t){var r,n=e.props,a=e.$formContext;if(a.$$getDefault){var i=n.name,o=a.$$getDefault(),u=o.$$defaultStates,s=o.$$defaultValues;if(i&&s){var c=parsePath(s,i);r=parsePath(u,i)||{},isUndefined(c)||(r.$value=c)}}var $=n.$defaultValue,d=n.$defaultState;return l(_objectSpread({},$baseState,isFunction(d)?d(n):d,{$value:isFunction($)?$(n):"$defaultValue"in n?$:""},r,t))}function a(){return _objectSpread({},e.$state)}function i(t){return r=new Promise(function(r){var n,a,i,l,c=e.props,$=e.$formContext,d=_objectSpread({},c.$validators,c.$asyncValidators),f=e.$state,p=f.$value,h=f.$pending,m=Object.assign({},f.$error),v=$.$formutil,g={},y=!1;delete m[FORM_VALIDATE_RESULT];var b=Object.keys(d).reduce(function(t,r){if(delete m[r],!y&&null!=c[r]){var a=d[r](p,c[r],_objectSpread({},c,{$formutil:v,$fieldutil:e.$fieldutil,$validError:g}));isPromise(a)?t.push(a.catch(function(e){n||u(r,e||r)})):isError(a)&&(g[r]=a||r,warningValidatorReturn(a,r,c.name),c.$validateLazy&&(y=!0))}return t},[]),_=function(e){return r(runCallback(t,runCallback(i,e)))};b.length?(h||s(!0),a=function(e){return n=e(_)},b.push(o(_objectSpread({},m,g))),l=Promise.all(b).then(function(){return n||(e.$shouldCancelPrevAsyncValidate=null,s(!1,_))})):(h&&s(!1),l=o(_objectSpread({},m,g),_)),e.$shouldCancelPrevAsyncValidate&&e.$shouldCancelPrevAsyncValidate(function(e){return i=e,l}),e.$shouldCancelPrevAsyncValidate=a})}function o(t,r){return e.$setState({$error:t},r)}function u(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,a=Object.assign({},e.$state.$error);return isError(r)?(a[t]=r||t,warningValidatorReturn(r,t,e.props.name)):delete a[t],o(a,n)}function s(t,r){return e.$setState({$pending:t},r)}function l(t){var r=Object.assign({},t);"$error"in r&&(r.$error||(r.$error={}),r.$valid=0===Object.keys(r.$error).length);var n=e.props,i=n.$parser,o=n.$formatter;if("$viewValue"in r&&!("$value"in r)){r.$value=i?i(r.$viewValue,function(e){return r.$viewValue=e}):r.$viewValue}else if("$value"in r&&!("$viewValue"in r)){r.$viewValue=o?o(r.$value,function(e){return r.$value=e}):r.$value}return"$valid"in r?r.$invalid=!r.$valid:"$invalid"in r&&(r.$dirty=!r.$invalid),"$dirty"in r?r.$pristine=!r.$dirty:"$pristine"in r&&(r.$dirty=!r.$pristine),"$touched"in r?r.$untouched=!r.$touched:"$untouched"in r&&(r.$touched=!r.$untouched),e.$state=_objectSpread({},e.$state,r),a()}return{$$FIELD_UUID:e.$$FIELD_UUID,$$reset:n,$$merge:l,$$detectChange:function(e){("$value"in e||"$viewValue"in e)&&i()},$$triggerChange:function(t){var r=t.$newValue,n=t.$prevValue,a=e.props.$onFieldChange;isFunction(a)&&a(r,n,e.$formContext.$formutil)},$onValidate:function(e){return r.then(e),r},$new:function(){return e.$fieldutil},$picker:a,$getState:a,$getComponent:function(){return t},$reset:function(t,r){return e.$setState(n(t),r)},$getFirstError:function(){var t=e.$state.$error,r=void 0===t?{}:t;for(var n in r)return r[n]instanceof Error?r[n].message:r[n]},$validate:i,$setState:e.$setState,$render:function(t,r){return e.$setState({$viewValue:t,$dirty:!0},r)},$setValue:function(t,r){return e.$setState({$value:t},r)},$setTouched:function(t,r){return e.$setState({$touched:t},r)},$setDirty:function(t,r){return e.$setState({$dirty:t},r)},$setFocused:function(t,r){return e.$setState({$focused:t},r)},$setValidity:u,$setError:o,$setPending:s}}var Field=function(e){function t(){var e,r;_classCallCheck(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(a)))).$$FIELD_UUID=GET_FIELD_UUID(),r.$formContext=void 0,r.$state=void 0,r.$setState=function(e,t){return new Promise(function(n){var a=function(){return n(runCallback(t,r.$fieldutil))};if(r.isMounting){var i=r.props.name;i in(r.$formContext.$$registers||{})?r.$formContext.$$onChange(i,e,a):(r.$registered.$$merge(e),r.$registered.$$detectChange(e),r.forceUpdate(a))}else r.$registered.$$merge(e),a()})},r}return _inherits(t,React.Component),_createClass(t,[{key:"componentDidMount",value:function(){this.isMounting=!0;var e=this.props.name,t=this.$formContext;warning(!e||t.$formutil,"You should enusre that the <Field /> with the name '".concat(e,"' must be used underneath a <Form /> component or withForm() HOC, otherwise it's isolated.")),warning(e,"You should assign a name to <Field />, otherwise it will be isolated!"),t.$$register&&t.$$register(e,this.$fieldHandler),this.$prevValue=this.$state.$value}},{key:"componentWillUnmount",value:function(){this.$formContext.$$unregister&&this.$formContext.$$unregister(this.props.name,this.$fieldHandler,this.props.$reserveOnUnmount),this.isMounting=!1}},{key:"componentDidUpdate",value:function(e){var t=this.props.name;t!==e.name&&this.$formContext.$$register&&this.$formContext.$$register(t,this.$fieldHandler,e.name),this.$state.$value!==this.$prevValue&&(t in(this.$formContext.$$registers||{})||this.$registered.$$triggerChange({$newValue:this.$state.$value,$prevValue:this.$prevValue}),this.$prevValue=this.$state.$value)}},{key:"_render",value:function(){return renderField(this.$fieldutil=_objectSpread({$name:this.props.name},this.$registered.$getState(),this.$registered,{$$formutil:this.$formContext.$formutil}),this.props)}},{key:"render",value:function(){var e=this,t=!this.$formContext;return React__default.createElement(FormContext.Consumer,null,function(r){return e.$formContext=r,e.$fieldHandler||(e.$fieldHandler=createHandler(e,e)),e.$registered=(r.$$registers||{})[e.$fieldHandler.$name]||e.$fieldHandler,t&&(e.$fieldHandler.$$reset(),e.$fieldHandler.$validate()),e._render()})}}]),t}();function withField(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(r){function n(){return _classCallCheck(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))}return _inherits(n,React.Component),_createClass(n,[{key:"render",value:function(){var r=Object.assign({},this.props),n=this.props,a=(n.component,_objectWithoutProperties(n,["component"]));return["$validators","$asyncValidators","$validateLazy","$reserveOnUnmount","$defaultValue","$defaultState","$onFieldChange","$parser","$formatter","name"].concat(Object.keys(_objectSpread({},t.$validators,t.$asyncValidators,r.$validators,r.$asyncValidators))).forEach(function(e){e in r&&("$validators"!==e&&"$asyncValidators"!==e&&"$defaultState"!==e||(a[e]=_objectSpread({},t[e],r[e])),delete r[e])}),React__default.createElement(Field,Object.assign({},t,a,{render:function(t){return React__default.createElement(e,Object.assign({},r,{$fieldutil:t}))}}))}}]),n}();return r.displayName="React.Formutil.withField."+(e.displayName||e.name||"Anonymous"),hoistStatics(r,e)}Field.displayName=displayName;var withField$1=createHOC(withField),EasyFieldNative=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,React.Component),_createClass(t,[{key:"render",value:function(){var e=this,t=this.props,r=(t.$fieldutil,t.value),n=t.onChange,a=t.onFocus,i=t.onBlur,o=t.checked,u=t.unchecked,s=_objectWithoutProperties(t,["$fieldutil","value","onChange","onFocus","onBlur","checked","unchecked"]),l=this.props.type,c={value:"compositionValue"in this?this.compositionValue:r,onCompositionEnd:function(t){e.composition=!1,delete e.compositionValue,c.onChange(t)},onCompositionStart:function(){return e.composition=!0},onChange:function(t){var r=t.target.value;e.composition?(e.compositionValue=r,e.forceUpdate()):n(r,t)},onFocus:a,onBlur:i},$="input";switch(l){case"select":$=l,c.onChange=function(e){var t=e.target,r=t.multiple?[].slice.call(t.options).filter(function(e){return e.selected}).map(function(e){return e.value}):t.value;n(r,e)},delete s.type;break;case"textarea":$=l,delete s.type;break;case"checkbox":case"radio":c={checked:r===o,onChange:function(e){n(e.target.checked?o:u,e)},onFocus:a,onBlur:i}}return React__default.createElement($,Object.assign({},s,c))}}]),t}();EasyFieldNative.displayName="React.Formutil.EasyField.Native",EasyFieldNative.defaultProps={value:"",type:"text",checked:!0,unchecked:!1};var _createContext=createContext({}),Provider=_createContext.Provider,Consumer=_createContext.Consumer,EasyFieldGroup=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,React.Component),_createClass(t,[{key:"getGroupContext",value:function(){return this.props}},{key:"_render",value:function(){var e=this.props,t=e.className,r=e.groupNode,n=e.children,a={GroupOption:EasyFieldGroupOption,Field:DeprecatedEasyFieldGroupOption},i=isFunction(n)?n(a):React.Children.map(n,function(e){return React.cloneElement(e,a)});return null===r?i:React__default.createElement(r,{className:t},i)}},{key:"render",value:function(){return React__default.createElement(Provider,{value:this.getGroupContext()},this._render())}}]),t}();EasyFieldGroup.displayName="React.Formutil.EasyField.Group",EasyFieldGroup.defaultProps={type:"checkbox",groupNode:"div"};var EasyFieldGroupOption=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,React.Component),_createClass(t,[{key:"componentDidMount",value:function(){warning("$value"in this.props,"You should pass a $value to <GroupOption />.")}},{key:"render",value:function(){var e=this.props,t=e.$value,r=e.onChange,n=e.onFocus,a=e.onBlur,i=_objectWithoutProperties(e,["$value","onChange","onFocus","onBlur"]);return React__default.createElement(Consumer,null,function(e){var o=e.type,u=e.name,s="radio"===o?{checked:e.value===t,onChange:function(n){e.onChange(t,n),r&&r(n)}}:"checkbox"===o?{checked:e.value.indexOf(t)>-1,onChange:function(n){e.onChange(n.target.checked?e.value.concat(t):e.value.filter(function(e){return e!==t}),n),r&&r(n)}}:{value:e.value,onChange:function(t){e.onChange(t),r&&r(t)}};return React__default.createElement("input",Object.assign({name:u},i,s,{type:o,onFocus:function(t){e.onFocus(t),n&&n(t)},onBlur:function(t){e.onBlur(t),a&&a(t)}}))})}}]),t}();EasyFieldGroupOption.displayName="React.Formutil.EasyField.Group.Option";var DeprecatedEasyFieldGroupOption=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,React.Component),_createClass(t,[{key:"componentDidMount",value:function(){warning(!1,'The "Field" property in EasyField\'s children-props has been deprecated. Please use "GroupOption" instead.')}},{key:"render",value:function(){return React__default.createElement(EasyFieldGroupOption,this.props)}}]),t}();DeprecatedEasyFieldGroupOption.displayName="React.Formutil.EasyField.Group.Option.Deprecated";var EasyFieldList=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).id=0,r.latestValue=r.props.value,r.$formutil=void 0,r.FieldValidators={required:function(e){return null!==e}},r.$onFormChange=function(e){e.$onValidates(function(e){var t=e.$invalid,n=e.$params;t?r.props.value.length&&r.props.onChange(r.latestValue=[]):isEqual(r.props.value,n.list)||r.props.onChange(r.latestValue=n.list)})},r.swap=function(e,t,n){return r.$setState(function(r){var n=r.items,a=[n[e],n[t]];return n[t]=a[0],n[e]=a[1],n},n)},r.insert=function(){for(var e,t,n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return i.forEach(function(r){isFunction(r)?n=r:"number"===typeof r?e=r:"object"===typeof r&&(t=r)}),r.$setState(function(n){var a=n.items;return isUndefined(e)?a.push(r.getId(t)):a.splice(e,0,r.getId(t)),{items:a}},n)},r.remove=function(){for(var e,t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return a.forEach(function(r){isFunction(r)?t=r:"number"===typeof r&&(e=r)}),r.$setState(function(t){var n=t.items;return isUndefined(e)?n.pop():n.splice(e,1),n.length||(n=[r.getId()]),{items:n}},t)},r.$setState=function(e,t){return new Promise(function(n){return r.setState(e,function(){return r.$formutil.$onValidates(function(e){return n(runCallback(t,e))})})})},r.state={items:e.value.length?e.value.map(function(){return r.getId()}):[r.getId()],formKey:0},r}return _inherits(t,React.Component),_createClass(t,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.value!==this.latestValue&&(this.setState({items:this.props.value.length?this.props.value.map(function(){return t.getId()}):[this.getId()],formKey:this.state.formKey+1}),this.latestValue=this.props.value)}},{key:"getId",value:function(e){return{id:this.id++,values:e}}},{key:"render",value:function(){var e=this,t=this.props,r=t.children,n=t.onFocus,a=t.onBlur,i=t.value;if(!isFunction(r))return null;var o={$length:this.state.items.length,$insert:this.insert,$remove:this.remove,$swap:this.swap,$push:function(t,r){return e.insert(t,r)},$pop:function(t){return e.remove(t)},$shift:function(t){return e.remove(0,t)},$unshift:function(t,r){return e.insert(0,t,r)},onFocus:n,onBlur:a};return React__default.createElement(Form,{key:this.state.formKey,$defaultValues:{list:i},$onFormChange:this.$onFormChange,children:function(t){return e.$formutil=t,e.state.items.map(function(n,a){var i=n.id,u=n.values;return React__default.createElement(Field,{key:i,required:!0,$defaultValue:u||null,$validators:e.FieldValidators,name:"list[".concat(a,"]"),children:function(n){return React__default.createElement(Form,{$defaultValues:n.$value||{},$onFormChange:function(e){return e.$onValidates(function(e){var t=e.$invalid,r=e.$params;t?null!==n.$viewValue&&n.$render(null):isEqual(n.$viewValue,r)||n.$render(r)})},children:function(n){return r(_objectSpread({},o,n,{$index:a,$isLast:function(){return a===e.state.items.length-1},$isFirst:function(){return 0===a}}),t)}})}})})}})}}]),t}();EasyFieldList.displayName="React.Formutil.EasyField.List";var TYPE="__TYPE__",defaultValidators=[["required",function(e,t,r){var n=r.__TYPE__,a=r.checked;return"checked"===n?e===(void 0===a||a):!isEmpty(e)}],["maxLength",function(e,t){return isEmpty(e)||e.length<=t}],["minLength",function(e,t){return isEmpty(e)||e.length>=t}],["max",function(e,t){return isEmpty(e)||1*e<=t}],["min",function(e,t){return isEmpty(e)||1*e>=t}],["pattern",function(e,t){return isEmpty(e)||t.test(e)}],["enum",function(e,t){return isEmpty(e)||t.indexOf(e)>-1}],["checker",function(e,t,r){return t(e,r)}]].reduce(function(e,t){var r=_slicedToArray(t,2),n=r[0],a=r[1];return e[n]=function(e,t,r){var i=r.validMessage,o=void 0===i?{}:i;return a.apply(void 0,arguments)||o[n]||"Error input: ".concat(n)},e},{}),propTypes$1={type:PropTypes.string,children:PropTypes.oneOfType([PropTypes.func,PropTypes.node]),component:PropTypes.func,render:PropTypes.func,defaultValue:PropTypes.any,validMessage:PropTypes.object,valuePropName:PropTypes.string,changePropName:PropTypes.string,focusPropName:PropTypes.string,blurPropName:PropTypes.string,passUtil:PropTypes.string},displayName$1="React.Formutil.EasyField",defaultProps={validMessage:{},valuePropName:"value",changePropName:"onChange",focusPropName:"onFocus",blurPropName:"onBlur",$parser:function(e){return"string"===typeof e?e.trim():e}};function createHandler$1(e,t,r){var n,a=t.valuePropName,i=t.changePropName,o=t.focusPropName,u=t.blurPropName,s=t.passUtil,l=_objectSpread({},r,(_defineProperty(n={},a,e.$viewValue),_defineProperty(n,i,function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];var u=n[0],s=n[n.length-1];s=s&&s.target?[s]:n;var l=t[i];l&&l.apply(void 0,_toConsumableArray(s));var c=function(e){return e&&e.target?e.target[a]:e}(u);e.$render(c)}),_defineProperty(n,o,function(){var r=t[o];r&&r.apply(void 0,arguments),e.$setFocused(!0)}),_defineProperty(n,u,function(){var r=t[u];r&&r.apply(void 0,arguments),e.$untouched&&e.$setTouched(!0),e.$setFocused(!1)}),n));return s&&(l[!0===s?"$fieldutil":s]=e),l}function parseProps(e){var t=e.children,r=e.component,n=e.render,a=_objectWithoutProperties(e,["children","component","render"]),i=a.name,o=a.type,u=a.defaultValue,s=(a.valuePropName,a.changePropName,a.focusPropName,a.blurPropName,a.validMessage,a.__TYPE__,a.passUtil,a.$defaultValue,a.$defaultState,a.$onFieldChange,a.$validators,a.$asyncValidators,a.$validateLazy,a.$reserveOnUnmount,a.$parser,a.$formatter,_objectWithoutProperties(a,["name","type","defaultValue","valuePropName","changePropName","focusPropName","blurPropName","validMessage","__TYPE__","passUtil","$defaultValue","$defaultState","$onFieldChange","$validators","$asyncValidators","$validateLazy","$reserveOnUnmount","$parser","$formatter"])),l={children:t,component:r,render:n},c=!isUndefined(o)||isUndefined(t)&&isUndefined(r)&&isUndefined(n);if(Object.keys(_objectSpread({},a.$validators=_objectSpread({},defaultValidators,a.$validators),a.$asyncValidators)).forEach(function(e){e in s&&(c&&isValidProp(e)||delete s[e])}),c){var $=_slicedToArray((o||"").split("."),2),d=$[0],f=void 0===d?"text":d,p=$[1];switch(l.component="group"===f?EasyFieldGroup:"list"===f?EasyFieldList:EasyFieldNative,i&&(s.name=i),o&&(s.type=f),t&&(s.children=t),f){case"select":case"textarea":e.multiple&&(a[TYPE]="array");break;case"group":"checkbox"===p&&(a[TYPE]="array"),s.type=p;break;case"checkbox":case"radio":a[TYPE]="checked";break;case"list":a[TYPE]="array"}}if(!("$defaultValue"in a)&&"defaultValue"in e&&(a.$defaultValue=u),!("$defaultValue"in a)&&TYPE in a){var h;switch(a[TYPE]){case"checked":var m=a.unchecked;h=void 0!==m&&m;break;case"array":h=[];break;case"object":h={};break;case"number":h=0}a.$defaultValue=h}return{fieldProps:a,childProps:s,renderProps:l}}function renderField$1(e,t){var r=t.component,n=t.render,a=t.children;return r?React.createElement(r,e):isFunction(n)?n(e):isFunction(a)?a(e):React.Children.map(a,function(t){return React.cloneElement(t,e)})}var EasyField=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,React.Component),_createClass(t,[{key:"render",value:function(){var e=parseProps(this.props),t=e.fieldProps,r=e.childProps,n=e.renderProps;return React__default.createElement(Field,Object.assign({},t,{children:function(e){return renderField$1(createHandler$1(e,t,r),n)}}))}}]),t}();function connect(e){var t=function(t){function r(){return _classCallCheck(this,r),_possibleConstructorReturn(this,_getPrototypeOf(r).apply(this,arguments))}return _inherits(r,React.Component),_createClass(r,[{key:"render",value:function(){var t=this;return React__default.createElement(FormContext.Consumer,null,function(r){return React__default.createElement(e,Object.assign({},t.props,{$formutil:r.$formutil}))})}}]),r}();return t.displayName="React.Formutil.connect."+(e.displayName||e.name||"Anonymous"),hoistStatics(t,e)}function useFormContext(){return React.useContext(FormContext)}function useField(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&("string"===typeof e?(t=e,r.name=t):t=(r=e).name);var n=useFormContext(),a=React.useRef({}).current,i=React.useRef([]);a.$formContext=n,a.props=r,a.$setState=function(e,r){return new Promise(function(s){var l=function(){return s(runCallback(r,a.$fieldutil))};a.isMounting?t in(n.$$registers||{})?n.$$onChange(t,e,l):(o(u.$$merge(e)),u.$$detectChange(e),i.current.push(l)):(u.$$merge(e),l())})};var o=_slicedToArray(React.useState(function(){a.$$FIELD_UUID=GET_FIELD_UUID(),a.$fieldHandler=createHandler(a);var e=a.$fieldHandler.$$reset();return a.$fieldHandler.$validate(),e}),2)[1],u=(n.$$registers||{})[a.$fieldHandler.$name]||a.$fieldHandler;return React.useLayoutEffect(function(){var e=a.$state;if(a.isMounting&&!(t in(n.$$registers||{}))){var r=a.$prevValue;u.$$triggerChange({$newValue:e.$value,$prevValue:r})}a.$prevValue=e.$value},[a.$state.$value]),React.useLayoutEffect(function(){return a.isMounting=!0,warning(!t||n.$formutil,"You should enusre that the useField() with the name '".concat(t,"' must be used underneath a <Form /> component or withForm() HOC, otherwise it's isolated.")),warning(t,"You should pass a name argument to useField(), otherwise it will be isolated!"),function(){n.$$unregister&&n.$$unregister(t,a.$fieldHandler,r.$reserveOnUnmount),a.isMounting=!1}},[]),React.useLayoutEffect(function(){n.$$register&&(a.$registered=n.$$register(t,a.$fieldHandler,a.$prevName)),a.$prevName=t},[t]),React.useLayoutEffect(function(){if(i.current.length>0){var e=_toConsumableArray(i.current);for(i.current.length=0;e.length;)e.pop()(a.$fieldutil)}}),a.$fieldutil=_objectSpread({$name:t},u.$getState(),u,{$$formutil:n.$formutil})}function useForm(){return useFormContext().$formutil}function useHandler(e){var t=parseProps(e=_objectSpread({},defaultProps,e,{children:null})),r=t.fieldProps,n=t.childProps;return createHandler$1(useField(r),r,n)}EasyField.displayName=displayName$1,EasyField.defaultProps=defaultProps,exports.EasyField=EasyField,exports.Field=Field,exports.Form=Form,exports.connect=connect,exports.useField=useField,exports.useForm=useForm,exports.useHandler=useHandler,exports.withField=withField$1,exports.withForm=withForm$1;
