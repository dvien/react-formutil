"use strict";Object.defineProperty(exports,"__esModule",{value:true});function e(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var r=require("react");var t=e(r);var n=require("react-is");var i=e(require("warning"));var a=e(require("hoist-non-react-statics"));var o=e(require("react-fast-compare"));function u(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}var s=u;function l(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);if(r)n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}));t.push.apply(t,n)}return t}function f(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};if(r%2){l(Object(t),true).forEach((function(r){s(e,r,t[r])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))}else{l(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}}return e}var $=f;function c(e,r){if(r==null||r>e.length)r=e.length;for(var t=0,n=new Array(r);t<r;t++){n[t]=e[t]}return n}var d=c;function v(e){if(Array.isArray(e))return d(e)}var p=v;function h(e){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}var m=h;function g(e,r){if(!e)return;if(typeof e==="string")return d(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor)t=e.constructor.name;if(t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return d(e,r)}var y=g;function b(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var w=b;function F(e){return p(e)||m(e)||y(e)||w()}var C=F;function V(e){if(Array.isArray(e))return e}var P=V;function k(e,r){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(e)))return;var t=[];var n=true;var i=false;var a=undefined;try{for(var o=e[Symbol.iterator](),u;!(n=(u=o.next()).done);n=true){t.push(u.value);if(r&&t.length===r)break}}catch(e){i=true;a=e}finally{try{if(!n&&o["return"]!=null)o["return"]()}finally{if(i)throw a}}return t}var S=k;function E(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var O=E;function _(e,r){return P(e)||S(e,r)||y(e,r)||O()}var j=_;function x(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}var R=x;function A(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function D(e,r,t){if(r)A(e.prototype,r);if(t)A(e,t);return e}var N=D;function U(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}var T=U;function I(e,r){return r={exports:{}},e(r,r.exports),r.exports}var H=I((function(e){function r(t){e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function e(r){return r.__proto__||Object.getPrototypeOf(r)};return r(t)}e.exports=r}));function M(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}var q=M;var L=I((function(e){function r(t){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){e.exports=r=function e(r){return typeof r}}else{e.exports=r=function e(r){return r&&typeof Symbol==="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r}}return r(t)}e.exports=r}));function B(e,r){if(r&&(L(r)==="object"||typeof r==="function")){return r}return T(e)}var Y=B;function Q(e){return function(){var r=H(e),t;if(q()){var n=H(this).constructor;t=Reflect.construct(r,arguments,n)}else{t=r.apply(this,arguments)}return Y(this,t)}}var G=Q;var z=I((function(e){function r(t,n){e.exports=r=Object.setPrototypeOf||function e(r,t){r.__proto__=t;return r};return r(t,n)}e.exports=r}));function K(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:true,configurable:true}});if(r)z(e,r)}var W=K;var J=r.createContext((function(){return{}}));var X=Object.getPrototypeOf({});var Z=/\s*(?:\]\s*\.|\]\s*\[|\.|\[|\])\s*/g;var ee=re(window)?global:window;function re(e){return typeof e==="undefined"}function te(e){return typeof e==="function"}function ne(e){return re(e)||e===null||e+""===""}function ie(e){return!!e&&te(e.then)}function ae(e){return Object.prototype.toString.call(e)==="[object Object]"}function oe(e){if(!ae(e))return false;if(null===Object.getPrototypeOf(e))return true;if(!te(e.constructor))return false;return e.constructor.prototype===X}function ue(e){return n.isValidElementType(e)&&typeof e!=="string"}function se(e){if(Array.isArray(e)){var r=[];for(var t=0,n=e.length;t<n;t++){r[t]=se(e[t])}return r}else if(oe(e)){var i={};for(var a in e){if(e.hasOwnProperty(a))i[a]=se(e[a])}return i}return e}var le=function e(r){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++){n[i-1]=arguments[i]}if(te(r)){r.apply(void 0,n)}return n[0]};function fe(e){return function(){for(var r=arguments.length,t=new Array(r),n=0;n<r;n++){t[n]=arguments[n]}if(ue(t[0])){return e.apply(void 0,t)}return function(r){return e(r,t[0])}}}var $e=["minlength","maxlength","max","min","required","pattern","step"];function ce(e){return $e.indexOf(e.toLowerCase())>-1}var de=function e(r){try{var t=new Function("origin","global","return typeof ".concat(r," === 'number' || (typeof ").concat(r," !== 'undefined' && !(origin in global)) ? ").concat(r," : origin"));return t(r,ee)}catch(e){return r}};function ve(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++){r[t]=arguments[t]}var n=r[0],a=r[1],o=r[2];i(typeof a==="string","The second parameter(".concat(JSON.stringify(a),") of parsePath() must be a string."));var u=(a.match(Z)||[]).map((function(e){return e.replace(/\s/g,"")}));var s=a.split(Z).map((function(e){return e.trim()})).filter((function(e){return e!==""}));var l=n;try{if(r.length<3){for(var f=0,c=s.length;f<c;f++){var d=de(s[f]);if(f+1===c){return l[d]}if(re(l[d])){break}l=l[d]}}else{for(var v=0,p=s.length;v<p;v++){var h=de(s[v]);var m=s[v+1];var g=u[v];if(re(m)){l[h]=o;break}switch(g){case"].":case".":l=l[h]=re(l[h])?{}:$({},l[h]);break;case"][":case"[":var y=de(m);l=l[h]=re(l[h])?typeof y==="number"&&y>=0?[]:{}:Array.isArray(l[h])?C(l[h]):$({},l[h]);break;default:l[h]=o;break}}}}catch(e){i(false,"The name '%s' of Field seems is not a legal expression.",a)}if(r.length>2){return n}}function pe(e,r){var t=r.split(Z).map((function(e){return e.trim()})).filter((function(e){return e!==""}));for(var n=0,i=t.length;n<i;n++){var a=de(t[n]);if(!(a in e)){break}if(n+1===i){return{data:e[a]}}e=e[a]}}function he(e,r){if(e){if(te(e)){e(r)}else if("current"in e){e.current=r}}}var me=function e(r,t){for(var n=0,i=r.length;n<i;n++){if(t(r[n])===true){return r[n]}}};var ge=function e(r,t){return Object.keys(r).reduce((function(e,n){e[n]=t(r[n],n,r);return e}),{})};var ye=function e(r,t){return Object.keys(r).forEach((function(e){return t(r[e],e,r)}))};var be=undefined;function we(e,r,t){ye(e,(function(r,t){if(r===be){delete e[t]}else if(oe(r)||Array.isArray(r)){we(r,t,e)}}));if(t&&Object.keys(e).every((function(r){return e[r]===be}))){t[r]=be;we(t)}}var Fe=function e(r,t){if(!re(ve(r,t))){ve(r,t,be);we(r)}};function Ce(e,r){if(e===r){return true}var t=Object.keys(e);if(t.length!==Object.keys(r).length){return false}for(var n=0;n<t.length;n++){if(e[t[n]]!==r[t[n]]){return false}}return true}var Ve="FORM_VALIDATE_RESULT";var Pe,ke;if(typeof requestAnimationFrame==="function"){Pe=requestAnimationFrame;ke=cancelAnimationFrame}else{Pe=setTimeout;ke=clearTimeout}var Se=function(e){W(a,e);var n=G(a);function a(e){var r;R(this,a);r=n.call(this,e);r.$$formPending=void 0;r.$$formValidatePromise=void 0;r.$$registers={};r.$$deepRegisters={};r.getFormContext=function(){return{$$registers:r.$$registers,$$register:r.$$register,$$unregister:r.$$unregister,$$onChange:r.$$onChange,$$getDefault:r.$$getDefault,$formutil:r.$formutil}};r.$$regDuplications={};r.$$duplicateTimer=void 0;r.$$checkDuplication=function(){var e=T(r),t=e.$$regDuplications;var n;ye(t,(function(e,r){var a=j(e,2),o=a[0],u=a[1];i(o.$$reserved,"The Field with a name '".concat(r,"' has been registered!"));u.$$reset(o.$getState());n=delete t[r]}));if(n){r.$render()}};r.$$register=function(e,t,n){r.$$unregister(n,t);if(e){var i=r.$$getRegister(e);if(i){ke(r.$$duplicateTimer);r.$$regDuplications[e]=[i,t];r.$$duplicateTimer=Pe(r.$$checkDuplication)}else{r.$$fieldChangedQueue.push({name:e,$newValue:t.$getState().$value});Fe(r.$$defaultValues,e)}r.$$registers[t.$name=e]=t;r.$$formShouldUpdateFields[e]=true;r.createDeepRegisters();r.$render()}};r.$$unregister=function(e,t,n){if(e){if(e in r.$$regDuplications){var i=j(r.$$regDuplications[e],2),a=i[0],o=i[1];r.$$fieldChangedQueue.push({name:e,$newValue:o.$getState().$value,$prevValue:a.$getState().$value});delete r.$$regDuplications[e]}else if(r.$$registers[e]===t){if(n){t.$$reserved=true}else{delete r.$$registers[e];r.$$fieldChangedQueue.push({name:e,$prevValue:t.$getState().$value});Fe(r.$$defaultValues,e)}}r.$$formShouldUpdateAll=true;r.createDeepRegisters();r.$render()}};r.$$defaultInitialize=function(){var e=r.props,t=e.$defaultValues,n=e.$defaultStates;r.$$defaultValues=r.$$deepParseObject(se(te(t)?t(r.props)||{}:t));r.$$defaultStates=r.$$deepParseObject(se(te(n)?n(r.props)||{}:n))};r.$$getDefault=function(){return{$$defaultStates:r.$$defaultStates,$$defaultValues:r.$$defaultValues}};r.$$formShouldUpdateFields={};r.$$formShouldUpdateAll=false;r.$$triggerChangeTimer=void 0;r.$$fieldChangedQueue=[];r.$$triggerFormChange=function(){if(r.$$fieldChangedQueue.length){var e=C(r.$$fieldChangedQueue);r.$$fieldChangedQueue.length=0;var t={};var n={};var i=r.$$registers;var a=false;e.forEach((function(e){if(!(e.name in i)){delete e.$newValue}if(e.$newValue!==e.$prevValue){if("$newValue"in e&&"$prevValue"in e){var o=r.$$getRegister(e.name);if(o){o.$$triggerChange(e)}}"$newValue"in e&&ve(t,e.name,e.$newValue);"$prevValue"in e&&ve(n,e.name,e.$prevValue);a=true}}));if(a){if(te(r.props.$validator)){r.$$formValidate()}if(te(r.props.$onFormChange)){r.props.$onFormChange(r.$formutil,t,n)}}}};r.createDeepRegisters=function(){return r.$$deepRegisters=r.$$deepParseObject(r.$$registers)};r.$$getRegister=function(e){if(e){var t=r.$$registers[e]||ve(r.$$deepRegisters,e);if(t){return t}}};r.$$formValidate=function(){return r.$$formValidatePromise=new Promise((function(e){var t=r.props.$validator;var n;var i;var a;var o;var u=t(r.$formutil.$params,r.$formutil);var s=function r(t){return e(le(a,t))};if(ie(u)){if(!r.$$formPending){r.$$formPending=true;r.$render()}i=function e(r){return n=r(s)};o=u.then((function(){return void 0}),(function(e){return e})).then((function(e){if(n){return n}r.$shouldCancelPrevAsyncValidate=null;r.$$formPending=false;return r.$$setFormErrors(e,s)}))}else{if(r.$$formPending){r.$$formPending=false}o=r.$$setFormErrors(u,s)}if(r.$shouldCancelPrevAsyncValidate){r.$shouldCancelPrevAsyncValidate((function(e){a=e;return o}))}r.$shouldCancelPrevAsyncValidate=i}))};r.$$setFormErrors=function(e,t){if(e&&(e instanceof Error||typeof e!=="object")){i(false,"The result of $validator in <Form /> should always return None(null,undefined) or an object contains error message of Field.");return r.$render(t)}return r.$$setStates(e||{},(function(e,r){var t=r.$getState(),n=t.$error,i=n===void 0?{}:n;if(e){return{$error:$({},i,s({},Ve,e))}}if(i[Ve]){delete i[Ve];return{$error:i}}}),t,true)};r.$getField=function(e){var t=r.$$getRegister(e);i(!e||t,"$getField('".concat(e,"') fail to find the matched Field. Maybe it has been unmounted."));i(e,"You should pass a name of the mounted Field to $getField().");if(t){var n;return(n=t.$new)===null||n===void 0?void 0:n.call(t)}};r.$$onChange=function(e,t,n){return r.$setStates(s({},e,t),n)};r.$$setStates=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=arguments.length>1?arguments[1]:undefined;var n=arguments.length>2?arguments[2]:undefined;var i=arguments.length>3?arguments[3]:undefined;var a=r.$$deepParseObject(e);ye(r.$$registers,(function(e,n){var o=pe(a,n);if(i||o){var u=t(o&&o.data,e);if(u){var s=r.$formutil.$weakParams[n];var l=e.$$merge(u),f=l.$value;e.$$detectChange(u);if("$value"in u||"$viewValue"in u){var $=me(r.$$fieldChangedQueue,(function(e){return e.name===n}));if($){if(!("$prevValue"in $)){$.$prevValue=$.$newValue}$.$newValue=f}else{r.$$fieldChangedQueue.push({name:n,$newValue:f,$prevValue:s})}}r.$$formShouldUpdateFields[n]=true}}}));return r.$render(n)};r.$render=function(e){return new Promise((function(t){return r.forceUpdate((function(){return t(le(e,r.$formutil))}))}))};r.$validates=function(){var e;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++){n[i]=arguments[i]}if(te(n[n.length-1])){e=n.pop()}if(n.length){var a=function e(t){t.forEach((function(t){if(Array.isArray(t)){e(t)}else{var n=r.$getField(t);if(n){n.$validate()}}}))};a(n)}else{ye(r.$$registers,(function(e){return e.$validate()}));if(te(r.props.$validator)){r.$$formValidate()}}return r.$onValidates(e)};r.$onValidates=function(e){var t=Object.keys(r.$$registers).map((function(e){return r.$$registers[e].$onValidate()}));t.push(r.$$formValidatePromise);return Promise.all(t).then((function(){return le(e,r.$formutil)}))};r.$validate=function(e,t){var n=r.$getField(e);if(n){return n.$validate(t)}return le(t)};r.$reset=function(e,t){r.$$defaultInitialize();if(te(e)){t=e;e={}}return r.$$setStates(e,(function(e,r){return r.$$reset(e)}),t,true)};r.$setStates=function(e,t){return r.$$setStates(e,(function(e){return e}),t)};r.$setValues=function(e,t){r.$$deepParseObject(se(e),r.$$defaultValues);we(r.$$defaultValues);return r.$$setStates(e,(function(e){return{$value:e}}),t)};r.$setFocuses=function(e,t){return r.$$setStates(e,(function(e){return{$focused:e}}),t)};r.$setDirts=function(e,t){return r.$$setStates(e,(function(e){return{$dirty:e}}),t)};r.$setTouches=function(e,t){return r.$$setStates(e,(function(e){return{$touched:e}}),t)};r.$setPendings=function(e,t){return r.$$setStates(e,(function(e){return{$pending:e}}),t)};r.$setErrors=function(e,t){return r.$$setStates(e,(function(e){return{$error:e}}),t)};r.$batchState=function(e,t){return r.$setStates(ge(r.$$registers,(function(){return e})),t)};r.$batchDirty=function(e,t){return r.$batchState({$dirty:e},t)};r.$batchTouched=function(e,t){return r.$batchState({$touched:e},t)};r.$batchFocused=function(e,t){return r.$batchState({$focused:e},t)};r.$batchPending=function(e,t){return r.$batchState({$pending:e},t)};r.$batchError=function(e,t){return r.$batchState({$error:e},t)};r.$getFirstError=function(e){var t=r.$formutil;if(e){var n=t.$getField(e);return n&&n.$getFirstError()}for(var i in t.$weakErrors){if(t.$weakErrors.hasOwnProperty(i)){var a=t.$weakErrors[i];for(var o in a){if(a.hasOwnProperty(o)){return a[o]instanceof Error?a[o].message:a[o]}}}}};r.$new=function(){return r.$formutil};r.$$defaultInitialize();return r}N(a,[{key:"$$deepParseObject",value:function e(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};ye(r,(function(e,r){return ve(t,r,e)}));return t}},{key:"$$resetFormUpdateFields",value:function e(){this.$$formShouldUpdateFields={};this.$$formShouldUpdateAll=false}},{key:"componentDidMount",value:function e(){he(this.props.$ref,this.$formutil)}},{key:"componentDidUpdate",value:function e(r){var t=this;he(this.props.$ref,this.$formutil);ke(this.$$triggerChangeTimer);this.$$triggerChangeTimer=Pe((function(){t.$$triggerFormChange()}))}},{key:"componentWillUnmount",value:function e(){he(this.props.$ref,null)}},{key:"_render",value:function e(){var t=this.$formutil;var n=this.props,i=n.children,a=n.render,o=n.component;if(o){return r.createElement(o,{$formutil:t})}if(te(a)){return a(t)}if(te(i)){return i(t)}return r.Children.map(i,(function(e){return e&&ue(e.type)?r.cloneElement(e,{$formutil:t}):e}))}},{key:"render",value:function e(){var r=this;var n=this.props.$processer;var i=Object.keys(this.$$registers).map((function(e){return{path:e,$state:r.$$registers[e].$getState()}}));var a=this.$$formShouldUpdateAll;var o=this.$formutil||{};var u=i.some((function(e){var r=e.$state;return r.$invalid}));var s=i.some((function(e){var r=e.$state;return r.$dirty}));var l=i.some((function(e){var r=e.$state;return r.$touched}));var f=i.some((function(e){var r=e.$state;return r.$focused}));var c=this.$$formPending||i.some((function(e){var r=e.$state;return r.$pending}));var d=a?{}:$({},o.$pureParams);var v=a?{}:$({},o.$states);var p=a?{}:$({},o.$errors);var h=a?{}:$({},o.$dirts);var m=a?{}:$({},o.$touches);var g=a?{}:$({},o.$focuses);var y=a?{}:$({},o.$pendings);var b=a?{}:$({},o.$weakStates);var w=a?{}:$({},o.$weakParams);var F=a?{}:$({},o.$weakErrors);var C=a?{}:$({},o.$weakDirts);var V=a?{}:$({},o.$weakFocuses);var P=a?{}:$({},o.$weakTouches);var k=a?{}:$({},o.$weakPendings);for(var S=0,E=i.length;S<E;S++){var O=i[S],_=O.$state,j=O.path;if(!a){if(!this.$$formShouldUpdateFields[j]){continue}}if(n){n(_,j)}if(j in w&&_.$pristine&&re(_.$value)){delete w[j];Fe(d,j)}else if(w[j]!==_.$value){w[j]=_.$value;ve(d,j,_.$value)}ve(v,j,_);b[j]=_;if(F[j]!==_.$error){if(_.$invalid){ve(p,j,_.$error);F[j]=_.$error}else if(j in F){Fe(p,j);delete F[j]}}if(C[j]!==_.$dirty){ve(h,j,_.$dirty);C[j]=_.$dirty}if(P[j]!==_.$touched){ve(m,j,_.$touched);P[j]=_.$touched}if(V[j]!==_.$focused){ve(g,j,_.$focused);V[j]=_.$focused}if(k[j]!==_.$pending){ve(y,j,_.$pending);k[j]=_.$pending}}this.$formutil={$$registers:$({},this.$$registers),$$deepRegisters:this.$$deepRegisters,$states:v,$pureParams:d,$params:$({},this.$$defaultValues,{},d),$errors:p,$dirts:h,$touches:m,$focuses:g,$pendings:y,$weakStates:b,$weakParams:w,$weakErrors:F,$weakDirts:C,$weakTouches:P,$weakFocuses:V,$weakPendings:k,$getFirstError:this.$getFirstError,$render:this.$render,$getField:this.$getField,$onValidates:this.$onValidates,$new:this.$new,$setStates:this.$setStates,$setValues:this.$setValues,$setErrors:this.$setErrors,$setTouches:this.$setTouches,$setDirts:this.$setDirts,$setFocuses:this.$setFocuses,$setPendings:this.$setPendings,$batchState:this.$batchState,$batchTouched:this.$batchTouched,$batchDirty:this.$batchDirty,$batchFocused:this.$batchFocused,$batchPending:this.$batchPending,$reset:this.$reset,$validates:this.$validates,$validate:this.$validate,$valid:!u,$invalid:u,$dirty:s,$pristine:!s,$touched:l,$untouched:!l,$focused:f,$pending:c};this.$$resetFormUpdateFields();return t.createElement(J.Provider,{value:this.getFormContext},this._render())}}]);return a}(r.Component);Se.displayName="React.Formutil.Form";Se.defaultProps={$defaultValues:{},$defaultStates:{}};function Ee(e,r){if(e==null)return{};var t={};var n=Object.keys(e);var i,a;for(a=0;a<n.length;a++){i=n[a];if(r.indexOf(i)>=0)continue;t[i]=e[i]}return t}var Oe=Ee;function _e(e,r){if(e==null)return{};var t=Oe(e,r);var n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++){n=a[i];if(r.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;t[n]=e[n]}}return t}var je=_e;var xe=["render","component","children","$defaultValues","$defaultStates","$onFormChange","$validator","$processer","$ref"];function Re(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=function(r){W(a,r);var i=G(a);function a(){var r;R(this,a);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++){o[u]=arguments[u]}r=i.call.apply(i,[this].concat(o));r.renderChildren=function(n){return t.createElement(e,Object.assign({},r.othersProps,{$formutil:n,ref:r.props.__forwardRef__}))};return r}N(a,[{key:"render",value:function e(){var r=this.props,i=r.__forwardRef__,a=je(r,["__forwardRef__"]);var o=this.props,u=o.component,s=je(o,["component"]);xe.forEach((function(e){if(e in a){if(e==="$defaultStates"||e==="$defaultValues"){s[e]=$({},n[e],{},a[e])}delete a[e]}}));this.othersProps=a;return t.createElement(Se,Object.assign({},n,s,{render:this.renderChildren}))}}]);return a}(r.Component);i.displayName="React.Formutil.withForm."+(e.displayName||e.name||"Anonymous");var o=r.forwardRef((function(e,r){return t.createElement(i,Object.assign({__forwardRef__:r},e))}));o.displayName="React.Formutil.withForm.ForwardRef."+(e.displayName||e.name||"Anonymous");return a(o,e)}var Ae=fe(Re);var De=0;var Ne={$valid:true,$invalid:false,$dirty:false,$pristine:true,$touched:false,$untouched:true,$focused:false,$pending:false,$error:{}};function Ue(e){return e!==true}function Te(e,r,t){i(!re(e),"You should return a string or Error when the validation('".concat(t&&t+": ").concat(r,"') failed, otherwise return true."))}var Ie="React.Formutil.Field";function He(){return De++}function Me(e,t){var n=t.children,i=t.render,a=t.component;if(a){return r.createElement(a,{$fieldutil:e})}if(te(i)){return i(e)}if(te(n)){return n(e)}return r.Children.map(n,(function(t){return t&&ue(t.type)?r.cloneElement(t,{$fieldutil:e}):t}))}function qe(e,r){var t={$$FIELD_UUID:e.$$FIELD_UUID,$$reset:u,$$merge:b,$$detectChange:i,$$triggerChange:a,$onValidate:o,$new:function r(){return e.$fieldutil},$picker:s,$getState:s,$getComponent:function e(){return r},$reset:function r(t,n){return e.$setState(u(t),n)},$getFirstError:y,$validate:l,$setState:e.$setState,$render:f,$setValue:c,$setTouched:d,$setDirty:v,$setFocused:p,$setValidity:m,$setError:h,$setPending:g};var n;function i(e){if("$value"in e||"$viewValue"in e){l()}}function a(r){var t=r.$newValue,n=r.$prevValue;var i=e.props.$onFieldChange;if(te(i)){i(t,n,e.$formContext.$formutil)}}function o(e){n.then(e);return n}function u(r){var t;var n=e.props,i=e.$formContext;if(i.$$getDefault){var a=n.name;var o=i.$$getDefault(),u=o.$$defaultStates,s=o.$$defaultValues;if(a&&s){var l=ve(s,a);t=ve(u,a)||{};if(!re(l)){t.$value=l}}}var f=n.$defaultValue,c=n.$defaultState;return b($({},Ne,{},te(c)?c(n):c,{$value:te(f)?f(n):"$defaultValue"in n?f:""},t,{},r))}function s(){return $({},e.$state)}function l(r){return n=new Promise((function(t){var n=e.props,i=e.$formContext;var a=$({},n.$validators,{},n.$asyncValidators);var o=e.$state,u=o.$value,s=o.$pending,l=Object.assign({},o.$error);var f=i.$formutil;var c={};var d=false;var v;var p;var y;var b;delete l[Ve];var w=Object.keys(a).reduce((function(r,t){delete l[t];if(!d&&n[t]!=null){var i=a[t](u,n[t],$({},n,{$formutil:f,$fieldutil:e.$fieldutil,$validError:c}));if(ie(i)){r.push(i["catch"]((function(e){if(!v){m(t,e||t)}})))}else if(Ue(i)){c[t]=i||t;Te(i,t,n.name);if(n.$validateLazy){d=true}}}return r}),[]);var F=function e(n){return t(le(r,le(y,n)))};if(w.length){if(!s){g(true)}p=function e(r){return v=r(F)};w.push(h($({},l,{},c)));b=Promise.all(w).then((function(){if(v){return v}e.$shouldCancelPrevAsyncValidate=null;return g(false,F)}))}else{if(s){g(false)}b=h($({},l,{},c),F)}if(e.$shouldCancelPrevAsyncValidate){e.$shouldCancelPrevAsyncValidate((function(e){y=e;return b}))}e.$shouldCancelPrevAsyncValidate=p}))}function f(r,t){return e.$setState({$viewValue:r,$dirty:true},t)}function c(r,t){return e.$setState({$value:r},t)}function d(r,t){return e.$setState({$touched:r},t)}function v(r,t){return e.$setState({$dirty:r},t)}function p(r,t){return e.$setState({$focused:r},t)}function h(r,t){return e.$setState({$error:r},t)}function m(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var n=arguments.length>2?arguments[2]:undefined;var i=Object.assign({},e.$state.$error);if(Ue(t)){i[r]=t||r;Te(t,r,e.props.name)}else{delete i[r]}return h(i,n)}function g(r,t){return e.$setState({$pending:r},t)}function y(){var r=e.$state.$error,t=r===void 0?{}:r;for(var n in t){if(t.hasOwnProperty(n)){return t[n]instanceof Error?t[n].message:t[n]}}}function b(r){var t=Object.assign({},r);if("$error"in t){if(!t.$error){t.$error={}}t.$valid=Object.keys(t.$error).length===0}var n=e.props,i=n.$parser,a=n.$formatter;if("$viewValue"in t&&!("$value"in t)){var o=function e(r){return t.$viewValue=r};t.$value=i?i(t.$viewValue,o):t.$viewValue}else if("$value"in t&&!("$viewValue"in t)){var u=function e(r){return t.$value=r};t.$viewValue=a?a(t.$value,u):t.$value}if("$valid"in t){t.$invalid=!t.$valid}else if("$invalid"in t){t.$dirty=!t.$invalid}if("$dirty"in t){t.$pristine=!t.$dirty}else if("$pristine"in t){t.$dirty=!t.$pristine}if("$touched"in t){t.$untouched=!t.$touched}else if("$untouched"in t){t.$touched=!t.$untouched}e.$state=$({},e.$state,{},t);return s()}return t}var Le=function(e){W(n,e);var r=G(n);function n(){var e;R(this,n);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++){i[a]=arguments[a]}e=r.call.apply(r,[this].concat(i));e.$$FIELD_UUID=He();e.$formContext=void 0;e.$state=void 0;e.shouldRendered=false;e.$setState=function(r,t){return new Promise((function(n){var i=function r(){return n(le(t,e.$fieldutil))};if(e.isMounting){var a=e.props.name;if(a in(e.$formContext.$$registers||{})){e.shouldRendered=false;e.$formContext.$$onChange(a,r,i);if(!e.shouldRendered){e.forceUpdate()}}else{e.$registered.$$merge(r);e.$registered.$$detectChange(r);e.forceUpdate(i)}}else{e.$registered.$$merge(r);i()}}))};return e}N(n,[{key:"componentDidMount",value:function e(){this.isMounting=true;var r=this.props.name,t=this.$formContext;i(!r||t.$formutil,"You should enusre that the <Field /> with the name '".concat(r,"' must be used underneath a <Form /> component or withForm() HOC, otherwise it's isolated."));i(r,"You should assign a name to <Field />, otherwise it will be isolated!");if(t.$$register){t.$$register(r,this.$fieldHandler)}this.$prevState=this.$state;he(this.props.$ref,this.$fieldutil)}},{key:"componentWillUnmount",value:function e(){if(this.$formContext.$$unregister){this.$formContext.$$unregister(this.props.name,this.$fieldHandler,this.props.$reserveOnUnmount)}this.isMounting=false;he(this.props.$ref,null)}},{key:"componentDidUpdate",value:function e(r){var t=this.props.name;if(t!==r.name){if(this.$formContext.$$register){this.$formContext.$$register(t,this.$fieldHandler,r.name)}}he(this.props.$ref,this.$fieldutil);if(this.$state.$value!==this.$prevState.$value){if(!(t in(this.$formContext.$$registers||{}))){this.$registered.$$triggerChange({$newValue:this.$state.$value,$prevValue:this.$prevState.$value})}}this.$prevState=this.$state}},{key:"shouldComponentUpdate",value:function e(r){var t=r.$memo;return!t||!Ce(this.$registered.$getState(),this.$prevState)||!(Array.isArray(t)?o(t,this.props.$memo):o(this.props,r))}},{key:"_render",value:function e(){var r=this.$fieldutil=$({$name:this.props.name},this.$registered.$getState(),{},this.$registered,{$$formutil:this.$formContext.$formutil});return Me(r,this.props)}},{key:"render",value:function e(){var r=this;this.shouldRendered=true;return t.createElement(J.Consumer,null,(function(e){var t=!r.$formContext;r.$formContext=e();if(!r.$fieldHandler){r.$fieldHandler=qe(r,r)}r.$registered=(r.$formContext.$$registers||{})[r.$fieldHandler.$name]||r.$fieldHandler;if(t){r.$fieldHandler.$$reset();r.$fieldHandler.$validate()}return r._render()}))}}]);return n}(r.Component);Le.displayName=Ie;var Be=["name","$defaultValue","$defaultState","$onFieldChange","$validators","$asyncValidators","$validateLazy","$memo","$reserveOnUnmount","$ref","$parser","$formatter","render","component","children"];function Ye(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=function(r){W(a,r);var i=G(a);function a(){var r;R(this,a);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++){o[u]=arguments[u]}r=i.call.apply(i,[this].concat(o));r.renderChildren=function(n){return t.createElement(e,Object.assign({},r.othersProps,{$fieldutil:n,ref:r.props.__forwardRef__}))};return r}N(a,[{key:"render",value:function e(){var r=this.props,i=r.__forwardRef__,a=je(r,["__forwardRef__"]);var o=this.props,u=o.component,s=je(o,["component"]);Be.concat(Object.keys($({},n.$validators,{},n.$asyncValidators,{},a.$validators,{},a.$asyncValidators))).forEach((function(e){if(e in a){if(e==="$validators"||e==="$asyncValidators"||e==="$defaultState"){s[e]=$({},n[e],{},a[e])}delete a[e]}}));this.othersProps=a;return t.createElement(Le,Object.assign({},n,s,{render:this.renderChildren}))}}]);return a}(r.Component);i.displayName="React.Formutil.withField."+(e.displayName||e.name||"Anonymous");var o=r.forwardRef((function(e,r){return t.createElement(i,Object.assign({__forwardRef__:r},e))}));o.displayName="React.Formutil.withField.ForwardRef."+(e.displayName||e.name||"Anonymous");return a(o,e)}var Qe=fe(Ye);var Ge=function(e){W(n,e);var r=G(n);function n(){R(this,n);return r.apply(this,arguments)}N(n,[{key:"render",value:function e(){var r=this;var n=this.props,i=n.$fieldutil,a=n.value,o=n.onChange,u=n.onFocus,s=n.onBlur,l=n.checked,f=n.unchecked,$=je(n,["$fieldutil","value","onChange","onFocus","onBlur","checked","unchecked"]);var c=this.props.type;var d={value:"compositionValue"in this?this.compositionValue:a,onCompositionEnd:function e(t){r.composition=false;delete r.compositionValue;d.onChange(t)},onCompositionStart:function e(){return r.composition=true},onChange:function e(t){var n=t.target.value;if(r.composition){r.compositionValue=n;r.forceUpdate()}else{o(n,t)}},onFocus:u,onBlur:s};var v="input";switch(c){case"select":v=c;d.onChange=function(e){var r=e.target;var t=r.multiple?[].slice.call(r.options).filter((function(e){return e.selected})).map((function(e){return e.value})):r.value;o(t,e)};delete $.type;break;case"textarea":v=c;delete $.type;break;case"checkbox":case"radio":d={checked:a===l,onChange:function e(r){o(r.target.checked?l:f,r)},onFocus:u,onBlur:s};break}return t.createElement(v,Object.assign({},$,d))}}]);return n}(r.Component);Ge.displayName="React.Formutil.EasyField.Native";Ge.defaultProps={value:"",type:"text",checked:true,unchecked:false};var ze=r.createContext((function(){return{}})),Ke=ze.Provider,We=ze.Consumer;var Je=function(e){W(i,e);var n=G(i);function i(){var e;R(this,i);for(var r=arguments.length,t=new Array(r),a=0;a<r;a++){t[a]=arguments[a]}e=n.call.apply(n,[this].concat(t));e.getGroupContext=function(){return e.props};return e}N(i,[{key:"_render",value:function e(){var n=this.props,i=n.className,a=n.groupNode,o=n.children;var u={GroupOption:Xe,Field:Ze};var s=te(o)?o(u):r.Children.map(o,(function(e){return r.cloneElement(e,u)}));if(a===null){return s}return t.createElement(a,{className:i},s)}},{key:"render",value:function e(){return t.createElement(Ke,{value:this.getGroupContext},this._render())}}]);return i}(r.Component);Je.displayName="React.Formutil.EasyField.Group";Je.defaultProps={type:"checkbox",groupNode:"div"};var Xe=function(e){W(n,e);var r=G(n);function n(){R(this,n);return r.apply(this,arguments)}N(n,[{key:"componentDidMount",value:function e(){i("$value"in this.props,"You should pass a $value to <GroupOption />.")}},{key:"render",value:function e(){var r=this.props,n=r.$value,i=r.onChange,a=r.onFocus,o=r.onBlur,u=je(r,["$value","onChange","onFocus","onBlur"]);return t.createElement(We,null,(function(e){var r=e();var s=r.type,l=r.name;var f=s==="radio"?{checked:r.value===n,onChange:function e(t){r.onChange(n,t);i&&i(t)}}:s==="checkbox"?{checked:r.value.indexOf(n)>-1,onChange:function e(t){r.onChange(t.target.checked?r.value.concat(n):r.value.filter((function(e){return e!==n})),t);i&&i(t)}}:{value:r.value,onChange:function e(t){r.onChange(t);i&&i(t)}};return t.createElement("input",Object.assign({name:l},u,f,{type:s,onFocus:function e(t){r.onFocus(t);a&&a(t)},onBlur:function e(t){r.onBlur(t);o&&o(t)}}))}))}}]);return n}(r.Component);Xe.displayName="React.Formutil.EasyField.Group.Option";var Ze=function(e){W(n,e);var r=G(n);function n(){R(this,n);return r.apply(this,arguments)}N(n,[{key:"componentDidMount",value:function e(){i(false,'The "Field" property in EasyField\'s children-props has been deprecated. Please use "GroupOption" instead.')}},{key:"render",value:function e(){return t.createElement(Xe,this.props)}}]);return n}(r.Component);Ze.displayName="React.Formutil.EasyField.Group.Option.Deprecated";var er=t.Frament||"div";var rr=function(e){W(n,e);var r=G(n);function n(e){var t;R(this,n);t=r.call(this,e);t.id=0;t.latestValue=t.props.value;t.$formutil=void 0;t.FieldValidators={required:function e(r){return r!==null}};t.$onFormChange=function(e){e.$onValidates((function(e){var r=e.$invalid,n=e.$params;if(r){if(t.props.value.length){t.props.onChange(t.latestValue=[])}}else if(!o(t.props.value,n.list)){t.props.onChange(t.latestValue=n.list)}}))};t.swap=function(e,r,n){return t.$setState((function(t){var n=t.items;var i=[n[e],n[r]];n[r]=i[0];n[e]=i[1];return n}),n)};t.insert=function(){var e,r,n;for(var i=arguments.length,a=new Array(i),o=0;o<i;o++){a[o]=arguments[o]}a.forEach((function(t){if(te(t)){n=t}else if(typeof t==="number"){e=t}else if(typeof t==="object"){r=t}}));return t.$setState((function(n){var i=n.items;if(re(e)){i.push(t.getId(r))}else{i.splice(e,0,t.getId(r))}return{items:i}}),n)};t.remove=function(){var e,r;for(var n=arguments.length,i=new Array(n),a=0;a<n;a++){i[a]=arguments[a]}i.forEach((function(t){if(te(t)){r=t}else if(typeof t==="number"){e=t}}));return t.$setState((function(r){var n=r.items;if(re(e)){n.pop()}else{n.splice(e,1)}if(!n.length){n=[t.getId()]}return{items:n}}),r)};t.$setState=function(e,r){return new Promise((function(n){return t.setState(e,(function(){return t.$formutil.$onValidates((function(e){return n(le(r,e))}))}))}))};t.state={items:e.value.length?e.value.map((function(){return t.getId()})):[t.getId()],formKey:0};return t}N(n,[{key:"componentDidUpdate",value:function e(r){var t=this;if(this.props.value!==this.latestValue){this.setState({items:this.props.value.length?this.props.value.map((function(){return t.getId()})):[this.getId()],formKey:this.state.formKey+1});this.latestValue=this.props.value}}},{key:"getId",value:function e(r){return{id:this.id++,values:r}}},{key:"render",value:function e(){var r=this;var n=this.props,i=n.children,a=n.onFocus,u=n.onBlur,s=n.value;var l=this;if(!te(i)){return null}var f={$insert:this.insert,$remove:this.remove,$swap:this.swap,$push:function e(t,n){return r.insert(t,n)},$pop:function e(t){return r.remove(t)},$shift:function e(t){return r.remove(0,t)},$unshift:function e(t,n){return r.insert(0,t,n)},onFocus:a,onBlur:u};return t.createElement(Se,{key:this.state.formKey,$defaultValues:{list:s},$onFormChange:this.$onFormChange,children:function e(n){r.$formutil=n;return t.createElement(er,null,r.state.items.map((function(e,a){var u=e.id,s=e.values;return t.createElement(Le,{key:u,required:true,$defaultValue:s||null,$validators:r.FieldValidators,name:"list[".concat(a,"]"),children:function e(u){return t.createElement(Se,{$defaultValues:u.$value||{},$onFormChange:function e(r){return r.$onValidates((function(e){var r=e.$invalid,t=e.$params;if(r){if(u.$viewValue!==null){u.$render(null)}}else if(!o(u.$viewValue,t)){u.$render(t)}}))},children:function e(t){return i($({get $length(){return l.state.items.length},$index:a,$isLast:function e(){return a===r.state.items.length-1},$isFirst:function e(){return a===0}},f,{},t),n)}})}})})))}})}}]);return n}(r.Component);rr.displayName="React.Formutil.EasyField.List";var tr="__TYPE__";var nr=[["required",function(e,r,t){var n=t.__TYPE__,i=t.checked,a=i===void 0?true:i;return n==="checked"?e===a:!ne(e)}],["maxLength",function(e,r,t){return"required"in t.$validError||(e!==null&&e!==void 0?e:"").length<=r*1}],["minLength",function(e,r,t){return"required"in t.$validError||(e!==null&&e!==void 0?e:"").length>=r*1}],["max",function(e,r,t){return"required"in t.$validError||(e!==null&&e!==void 0?e:0)*1<=r*1}],["min",function(e,r,t){return"required"in t.$validError||(e!==null&&e!==void 0?e:0)*1>=r*1}],["pattern",function(e,r,t){return"required"in t.$validError||r.test(e)}],["enum",function(e,r,t){return"required"in t.$validError||r.indexOf(e)>-1}],["checker",function(e,r,t){return"required"in t.$validError||r(e,t)}]].reduce((function(e,r){var t=j(r,2),n=t[0],i=t[1];e[n]=function e(r,t,a){var o=a.validMessage,u=o===void 0?{}:o;return i.apply(void 0,arguments)||u[n]||"Error input: ".concat(n)};return e}),{});var ir="React.Formutil.EasyField";var ar={validMessage:{},valuePropName:"value",changePropName:"onChange",focusPropName:"onFocus",blurPropName:"onBlur",$parser:function e(r){return typeof r==="string"?r.trim():r}};function or(e,r,t){var n;var i=r.valuePropName,a=r.changePropName,o=r.focusPropName,u=r.blurPropName,l=r.getValueFromEvent,f=r.passUtil;var c=function e(r){return r&&r.target?r.target[i]:r};var d=$({},t,(n={},s(n,i,e.$viewValue),s(n,a,(function(t){var n;for(var i=arguments.length,o=new Array(i>1?i-1:0),u=1;u<i;u++){o[u-1]=arguments[u]}if(((n=o[0])===null||n===void 0?void 0:n.nativeEvent)instanceof Event){o.push(t)}else{o.unshift(t)}var s=r[a];s&&s.apply(void 0,o);var f=l?l.apply(void 0,o):c(t);e.$render(f)})),s(n,o,(function(){var t=r[o];t&&t.apply(void 0,arguments);e.$setFocused(true)})),s(n,u,(function(){var t=r[u];t&&t.apply(void 0,arguments);if(e.$untouched){e.$setTouched(true)}e.$setFocused(false)})),n));if(f){d[f===true?"$fieldutil":String(f)]=e}return d}function ur(e){var r=e.children,t=e.component,n=e.render,i=je(e,["children","component","render"]);var a=i.name,o=i.type,u=i.defaultValue,s=i.valuePropName,l=i.changePropName,f=i.focusPropName,c=i.blurPropName,d=i.getValueFromEvent,v=i.validMessage,p=i.checked,h=i.unchecked,m=i.__TYPE__,g=i.__DIFF__,y=i.passUtil,b=i.$defaultValue,w=i.$defaultState,F=i.$onFieldChange,C=i.$validators,V=i.$asyncValidators,P=i.$validateLazy,k=i.$memo,S=i.$reserveOnUnmount,E=i.$parser,O=i.$formatter,_=i.$ref,x=je(i,["name","type","defaultValue","valuePropName","changePropName","focusPropName","blurPropName","getValueFromEvent","validMessage","checked","unchecked","__TYPE__","__DIFF__","passUtil","$defaultValue","$defaultState","$onFieldChange","$validators","$asyncValidators","$validateLazy","$memo","$reserveOnUnmount","$parser","$formatter","$ref"]);var R={children:r,component:t,render:n};if(k===true&&re(g)){i.__DIFF__=[r,t,n]}var A=!re(o)||re(r)&&re(t)&&re(n);Object.keys($({},i.$validators=$({},nr,{},i.$validators),{},i.$asyncValidators)).forEach((function(e){if(e in x){if(!A||!ce(e)){delete x[e]}}}));if(A){var D=(o||"").split("."),N=j(D,2),U=N[0],T=U===void 0?"text":U,I=N[1];R.component=T==="group"?Je:T==="list"?rr:Ge;if(a){x.name=a}if(o){x.type=T}if(r){x.children=r}x.checked=p;x.unchecked=h;switch(T){case"select":case"textarea":if(e.multiple){i[tr]="array"}break;case"group":if(I==="checkbox"){i[tr]="array"}x.type=I;break;case"checkbox":case"radio":i[tr]="checked";break;case"list":i[tr]="array";break}}if(!("$defaultValue"in i)&&"defaultValue"in e){i.$defaultValue=u}if(!("$defaultValue"in i)&&tr in i){var H;switch(i[tr]){case"checked":var M=i.unchecked,q=M===void 0?false:M;H=q;break;case"array":H=[];break;case"object":H={};break;case"number":H=0;break}i.$defaultValue=H}return{fieldProps:i,childProps:x,renderProps:R}}function sr(e,t){var n=t.component,i=t.render,a=t.children;if(n){return r.createElement(n,e)}if(te(i)){return i(e)}if(te(a)){return a(e)}return r.Children.map(a,(function(t){return r.cloneElement(t,e)}))}var lr=function(e){W(n,e);var r=G(n);function n(){var e;R(this,n);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++){i[a]=arguments[a]}e=r.call.apply(r,[this].concat(i));e.renderChildren=function(r){var t=e.parsedProps,n=t.fieldProps,i=t.childProps,a=t.renderProps;return sr(or(r,n,i),a)};e.parsedProps={};return e}N(n,[{key:"render",value:function e(){var r=this.parsedProps=ur(this.props),n=r.fieldProps;return t.createElement(Le,Object.assign({},n,{children:this.renderChildren}))}}]);return n}(r.Component);lr.displayName=ir;lr.defaultProps=ar;function fr(e){var n=r.forwardRef((function(r,n){return t.createElement(J.Consumer,null,(function(i){return t.createElement(e,Object.assign({},r,{$formutil:i().$formutil,ref:n}))}))}));n.displayName="React.Formutil.connect."+(e.displayName||e.name||"Anonymous");return a(n,e)}function $r(){if(!t.useState){throw new Error("Hooks api need react@>=16.8, Please upgrade your reactjs.")}var e=t.useContext;var r=e(J);return r()}function cr(e){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!t.useState){throw new Error("Hooks api need react@>=16.8, Please upgrade your reactjs.")}var n=t.useState,a=t.useLayoutEffect,o=t.useRef;var u;if(e){if(typeof e==="string"){u=e;r.name=u}else{r=e;u=r.name}}var s=$r();var l=o({}).current;var f=o([]);var c;l.$formContext=s;l.props=r;l.$setState=h;l.shouldRendered=true;var d=n((function(){l.$$FIELD_UUID=He();l.$fieldHandler=c=qe(l);l.$fieldHandler.$$reset();l.$fieldHandler.$validate()})),v=j(d,2),p=v[1];if(!c){c=(s.$$registers||{})[l.$fieldHandler.$name]||l.$fieldHandler}a((function(){var e=l.$state;if(l.isMounting){if(!(u in(s.$$registers||{}))){c.$$triggerChange({$newValue:e.$value,$prevValue:l.$prevState.$value})}}l.$prevState=e}),[l.$state.$value]);a((function(){l.isMounting=true;i(!u||s.$formutil,"You should enusre that the useField() with the name '".concat(u,"' must be used underneath a <Form /> component or withForm() HOC, otherwise it's isolated."));i(u,"You should pass a name argument to useField(), otherwise it will be isolated!");return function(){l.isMounting=false;he(r.$ref,null)}}),[]);a((function(){if(s.$$register){s.$$register(u,l.$fieldHandler)}return function(){if(s.$$unregister){s.$$unregister(u,l.$fieldHandler,!l.isMounting&&r.$reserveOnUnmount)}}}),[u]);a((function(){he(r.$ref,l.$fieldutil)}));a((function(){if(f.current.length>0){var e=C(f.current);f.current.length=0;while(e.length){e.pop()(l.$fieldutil)}}}));function h(e,r){return new Promise((function(t){var n=function e(){return t(le(r,l.$fieldutil))};if(l.isMounting){if(u in(s.$$registers||{})){l.shouldRendered=false;s.$$onChange(u,e,n);if(!l.shouldRendered){p({})}}else{c.$$merge(e);c.$$detectChange(e);p({});f.current.push(n)}}else{c.$$merge(e);n()}}))}return l.$fieldutil=$({$name:u},c.$getState(),{},c,{$$formutil:s.$formutil})}function dr(){var e=$r(),r=e.$formutil;return r}function vr(e){e=$({},ar,{},e,{children:null});var r=ur(e),t=r.fieldProps,n=r.childProps;var i=cr(t);return or(i,t,n)}exports.EasyField=lr;exports.Field=Le;exports.Form=Se;exports.connect=fr;exports.formContext=J;exports.useField=cr;exports.useForm=dr;exports.useHandler=vr;exports.withField=Qe;exports.withForm=Ae;
